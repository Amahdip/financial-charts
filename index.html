<!DOCTYPE html>
<html lang="fa" dir="rtl">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>روند داده‌های مقیاس‌شده - Iran Macro</title>
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<link rel="stylesheet" href="styles.css" />
	</head>
	<body>
		<div class="container">
			<h1>روند داده‌های مقیاس‌شده</h1>
			<div class="subtitle">تحلیل جامع شاخص‌های مالی (1398 تا 1404)</div>

			<!-- Tab Navigation -->
			<div class="tab-navigation">
				<button class="tab-button active" onclick="switchTab('chart1')">
					شاخص‌های مالی
				</button>
				<button class="tab-button" onclick="switchTab('periodic-comparison')">
					مقایسه دوره‌ای
				</button>
				<button class="tab-button" onclick="switchTab('chart2')">
					شاخص‌های جایگزین
				</button>
				<button class="tab-button" onclick="switchTab('tables')">جداول</button>
				<button class="tab-button" onclick="switchTab('comparison')">
					مقایسه شرکت‌ها
				</button>
			</div>

			<div class="stats-grid">
				<div class="stat-card">
					<div class="stat-value" style="color: #3182ce">3,108,119</div>
					<div class="stat-label">بالاترین شاخص بورس</div>
				</div>
				<div class="stat-card">
					<div class="stat-value" style="color: #e53e3e">94,677,309</div>
					<div class="stat-label">بالاترین ارزش کل بورس (ریال)</div>
				</div>
				<div class="stat-card">
					<div class="stat-value" style="color: #38a169">977,800</div>
					<div class="stat-label">بالاترین نرخ دلار (ریال)</div>
				</div>
				<div class="stat-card">
					<div class="stat-value" style="color: #d69e2e">266</div>
					<div class="stat-label">بالاترین ارزش کل بورس (دلار)</div>
				</div>
			</div>

			<!-- Chart Containers -->
			<div id="chart1" class="chart-container active">
				<canvas id="myChart"></canvas>
			</div>

			<div id="periodic-comparison" class="chart-container">
				<div class="periodic-sub-tab-navigation">
					<button
						class="periodic-sub-tab-button active"
						onclick="switchPeriodicSubTab('periodic-chart1')"
					>
						شاخص بورس
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart2')"
					>
						ارزش ریالی بورس
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart3')"
					>
						ارزش دلاری بورس
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart4')"
					>
						سکه امامی جدید
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart5')"
					>
						دلار
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart6')"
					>
						شاخص تورم
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart7')"
					>
						مسکن
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart8')"
					>
						شاخص‌های جایگزین
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart9')"
					>
						نمودار میله‌ای ۱
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart9')"
					>
						نمودار میله‌ای ۲
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart10')"
					>
						نمودار میله‌ای شماره ۳
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart11')"
					>
						نمودار میله‌ای شماره ۴
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart12')"
					>
						نمودار شیب متوسط ماهانه
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart13')"
					>
						ارزش دلاری بورس (مقدار)
					</button>
					<button
						class="periodic-sub-tab-button"
						onclick="switchPeriodicSubTab('periodic-chart14')"
					>
						ارزش اسمی در مقابل ارزش واقعی بازار
					</button>
				</div>

				<div id="periodic-chart1" class="periodic-sub-chart active">
					<canvas id="periodicChart1"></canvas>
				</div>

				<div id="periodic-chart2" class="periodic-sub-chart">
					<canvas id="periodicChart2"></canvas>
				</div>

				<div id="periodic-chart3" class="periodic-sub-chart">
					<canvas id="periodicChart3"></canvas>
				</div>

				<div id="periodic-chart4" class="periodic-sub-chart">
					<canvas id="periodicChart4"></canvas>
				</div>

				<div id="periodic-chart5" class="periodic-sub-chart">
					<canvas id="periodicChart5"></canvas>
				</div>

				<div id="periodic-chart6" class="periodic-sub-chart">
					<canvas id="periodicChart6"></canvas>
				</div>

				<div id="periodic-chart7" class="periodic-sub-chart">
					<canvas id="periodicChart7"></canvas>
				</div>

				<div id="periodic-chart8" class="periodic-sub-chart">
					<canvas id="periodicChart8"></canvas>
				</div>

				<div id="periodic-chart9" class="periodic-sub-chart">
					<canvas id="periodicChart9"></canvas>
				</div>
				<div id="periodic-chart10" class="periodic-sub-chart">
					<canvas id="periodicChart10"></canvas>
				</div>
				<div id="periodic-chart11" class="periodic-sub-chart">
					<canvas id="periodicChart11"></canvas>
				</div>
				<div id="periodic-chart12" class="periodic-sub-chart">
					<canvas id="periodicChart12"></canvas>
				</div>
				<div id="periodic-chart13" class="periodic-sub-chart">
					<canvas id="periodicChart13"></canvas>
				</div>
				<div id="periodic-chart14" class="periodic-sub-chart">
					<canvas id="periodicChart14"></canvas>
				</div>
			</div>

			<div id="chart2" class="chart-container">
				<canvas id="myChart2"></canvas>
			</div>

			<div id="tables" class="chart-container">
				<div class="tables-content">
					<div class="table-layout">
						<div class="table-section">
							<!-- EV/Revenue Category -->
							<div id="ev-revenue-category" class="category-content active">
								<div id="ev-revenue-original-table" class="sub-table active">
									<div class="table-container">
										<table>
											<thead>
												<tr>
													<th>ردیف</th>
													<th>شرح</th>
													<th>مبلغ (میلیون ریال)</th>
												</tr>
											</thead>
											<tbody id="ev-revenue-original-body">
												<!-- Data will be populated by JavaScript -->
											</tbody>
										</table>
									</div>
								</div>

								<div id="ev-revenue-corrected-table" class="sub-table">
									<div class="table-container">
										<table>
											<thead>
												<tr>
													<th>ردیف</th>
													<th>شرح</th>
													<th>مبلغ (میلیون ریال)</th>
												</tr>
											</thead>
											<tbody id="ev-revenue-corrected-body">
												<!-- Data will be populated by JavaScript -->
											</tbody>
										</table>
									</div>
								</div>

								<div id="ev-revenue-2022-table" class="sub-table">
									<div class="table-container">
										<table>
											<thead>
												<tr>
													<th>ردیف</th>
													<th>شرح</th>
													<th>مبلغ (میلیون ریال)</th>
												</tr>
											</thead>
											<tbody id="ev-revenue-2022-body">
												<!-- Data will be populated by JavaScript -->
											</tbody>
										</table>
									</div>
								</div>

								<div id="ev-revenue-custom-table" class="sub-table">
									<div class="table-container">
										<table>
											<thead>
												<tr>
													<th>ردیف</th>
													<th>شرح</th>
													<th>مبلغ (میلیون ریال)</th>
												</tr>
											</thead>
											<tbody id="ev-revenue-custom-body">
												<!-- Data will be populated by JavaScript -->
											</tbody>
										</table>
									</div>
								</div>
							</div>

							<!-- P/E Category -->
							<div id="pe-category" class="category-content">
								<div id="pe-original-table" class="sub-table active">
									<div class="table-container">
										<table>
											<thead>
												<tr>
													<th>ردیف</th>
													<th>شرح</th>
													<th>مبلغ (میلیون ریال)</th>
												</tr>
											</thead>
											<tbody id="pe-original-body">
												<!-- Data will be populated by JavaScript -->
											</tbody>
										</table>
									</div>
								</div>

								<div id="pe-corrected-table" class="sub-table">
									<div class="table-container">
										<table>
											<thead>
												<tr>
													<th>ردیف</th>
													<th>شرح</th>
													<th>مبلغ (میلیون ریال)</th>
												</tr>
											</thead>
											<tbody id="pe-corrected-body">
												<!-- Data will be populated by JavaScript -->
											</tbody>
										</table>
									</div>
								</div>

								<div id="pe-2022-table" class="sub-table">
									<div class="table-container">
										<table>
											<thead>
												<tr>
													<th>ردیف</th>
													<th>شرح</th>
													<th>مبلغ (میلیون ریال)</th>
												</tr>
											</thead>
											<tbody id="pe-2022-body">
												<!-- Data will be populated by JavaScript -->
											</tbody>
										</table>
									</div>
								</div>

								<div id="pe-custom-table" class="sub-table">
									<div class="table-container">
										<table>
											<thead>
												<tr>
													<th>ردیف</th>
													<th>شرح</th>
													<th>مبلغ (میلیون ریال)</th>
												</tr>
											</thead>
											<tbody id="pe-custom-body">
												<!-- Data will be populated by JavaScript -->
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>

						<div class="controls-section">
							<div class="category-controls">
								<button
									class="category-btn active"
									onclick="showCategory('ev-revenue')"
								>
									EV/Revenue
								</button>
								<button class="category-btn" onclick="showCategory('pe')">
									P/E
								</button>
							</div>

							<div class="subcategory-controls">
								<button
									class="subcategory-btn active"
									onclick="showSubTable('ev-revenue', 'original')"
								>
									جداول اصلی گزارش
								</button>
								<button
									class="subcategory-btn"
									onclick="showSubTable('ev-revenue', 'corrected')"
								>
									جداول اصلی گزارش با نسبت‌های صحیح
								</button>
								<button
									class="subcategory-btn"
									onclick="showSubTable('ev-revenue', '2022')"
								>
									جداول گزارش در پایان سال ۱۴۰۱
								</button>
								<button
									class="subcategory-btn"
									onclick="showSubTable('ev-revenue', 'custom')"
								>
									جداول با شرکت‌های متناسب
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div id="comparison" class="chart-container">
				<div class="sub-tab-navigation">
					<button
						class="sub-tab-button active"
						onclick="switchComparisonSubTab('evaluator-pe-tab')"
					>
						شرکت‌های متناسب - P/E
					</button>
					<button
						class="sub-tab-button"
						onclick="switchComparisonSubTab('our-pe-tab')"
					>
						شرکت‌های انتخاب شده توسط کارشناسان - P/E
					</button>
					<button
						class="sub-tab-button"
						onclick="switchComparisonSubTab('evaluator-ev-tab')"
					>
						شرکت‌های متناسب - EV/Revenue
					</button>
					<button
						class="sub-tab-button"
						onclick="switchComparisonSubTab('our-ev-tab')"
					>
						شرکت‌های انتخاب شده توسط کارشناسان - EV/Revenue
					</button>
				</div>

				<div id="evaluator-pe-tab" class="comparison-sub-table active">
					<div class="table-container">
						<table>
							<thead>
								<tr>
									<th>ردیف</th>
									<th>شرکت</th>
									<th>نماد</th>
									<th>سرویس</th>
									<th>Forward P/E (FY25)</th>
								</tr>
							</thead>
							<tbody id="evaluator-companies-body">
								<!-- Data will be populated by JavaScript -->
							</tbody>
						</table>
					</div>
				</div>

				<div id="our-pe-tab" class="comparison-sub-table">
					<div class="table-container">
						<table>
							<thead>
								<tr>
									<th>ردیف</th>
									<th>برند</th>
									<th>شرکت مادر</th>
									<th>وضعیت بورسی مستقل</th>
									<th>P/E مستقل؟</th>
									<th>P/E ادعایی در گزارش</th>
									<th>توضیحات</th>
								</tr>
							</thead>
							<tbody id="our-companies-body">
								<!-- Data will be populated by JavaScript -->
							</tbody>
						</table>
					</div>
				</div>

				<div id="evaluator-ev-tab" class="comparison-sub-table">
					<div class="table-container">
						<table>
							<thead>
								<tr>
									<th>ردیف</th>
									<th>شرکت</th>
									<th>نماد</th>
									<th>سرویس</th>
									<th>EV/Revenue</th>
								</tr>
							</thead>
							<tbody id="evaluator-ev-revenue-body">
								<!-- Data will be populated by JavaScript -->
							</tbody>
						</table>
					</div>
				</div>

				<div id="our-ev-tab" class="comparison-sub-table">
					<div class="table-container">
						<table>
							<thead>
								<tr>
									<th>ردیف</th>
									<th>شرکت</th>
									<th>2024 (EV/Revenue) ادعایی در گزارش</th>
									<th>2025 (پیش بینی)</th>
								</tr>
							</thead>
							<tbody id="our-ev-revenue-body">
								<!-- Data will be populated by JavaScript -->
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>

		<script>
			// Real data arrays for tooltips (unscaled values)
			const realData = {
				stockIndex: [
					204375,
					215168,
					233886,
					251278,
					266127,
					311471,
					305807,
					304997,
					356721,
					406008,
					478755,
					512900,
					708995,
					986759,
					1300813,
					1901169,
					1727265,
					1581206,
					1412355,
					1366535,
					1436393,
					1183978,
					1232716,
					1307657,
					1207047,
					1128164,
					1186906,
					1311306,
					1515887,
					1386466,
					1407758,
					1407133,
					1359011,
					1279450,
					1274305,
					1367250,
					1512219,
					1582144,
					1533394,
					1473498,
					1431477,
					1355241,
					1296798,
					1407654,
					1496201,
					1657577,
					1594263,
					1960457,
					2324133,
					2318507,
					2173893,
					null,
					null,
					null,
					2032212,
					2022787,
					2211856,
					2166928,
					2070775,
					2195092,
					2201987,
					2112560,
					2043980,
					2172192,
					2037209,
					2097005,
					2007281,
					2257614,
					2501778,
					2849940,
					2719339,
					2709764,
					3077924,
					3108119,
					2984605,
					2843904,
				],
				marketValueRial: [
					6225526,
					6554295,
					7124469,
					7654252,
					8106571,
					9487808,
					9315275,
					9290602,
					10866181,
					12367527,
					14583494,
					15623595,
					21596889,
					30057957,
					39624433,
					57912068,
					52614714,
					48165581,
					43022143,
					41626423,
					43754378,
					36065501,
					37550121,
					39832929,
					36768204,
					34365332,
					36154671,
					39944070,
					46175856,
					42233550,
					42882122,
					42863081,
					41397226,
					38973689,
					38816963,
					41648206,
					46064142,
					48194139,
					46709154,
					44884651,
					43604640,
					41282384,
					39502132,
					42878958,
					45576204,
					50491922,
					48563302,
					59718058,
					70796076,
					70624695,
					66219594,
					null,
					null,
					null,
					61903799,
					61616690,
					67375993,
					66007414,
					63078484,
					66865340,
					67075358,
					64351309,
					62262277,
					66167770,
					62056008,
					63877460,
					61144372,
					68769824,
					76207371,
					86812850,
					82834562,
					82542906,
					93757528,
					94677309,
					90914927,
					86628981,
				],
				dollarRate: [
					134700, 142350, 132000, 125240, 116000, 113930, 112320, 117940,
					131690, 134390, 143930, 149030, 154420, 177010, 194800, 218000,
					225020, 274970, 296440, 256200, 256040, 226450, 251710, 239630,
					241840, 223000, 242590, 246280, 276660, 275210, 274150, 284400,
					300770, 275250, 254170, 262520, 278620, 303230, 319780, 318830,
					293440, 316730, 328120, 356580, 397610, 439761, 499020, 481014,
					516069, 523310, 497310, 483360, 490230, 493930, 506362, 501990,
					500760, 542230, 570360, 603510, 600900, 605600, 614800, 576110,
					581600, 592300, 648550, 689300, 767550, 806700, 919950, 977800,
					827900, 831900, 835350, 881100,
				],
				marketValueUSD: [
					46,
					46,
					54,
					61,
					70,
					83,
					83,
					79,
					83,
					92,
					101,
					105,
					140,
					170,
					203,
					266,
					234,
					175,
					145,
					162,
					171,
					159,
					149,
					166,
					152,
					154,
					149,
					162,
					167,
					153,
					156,
					151,
					138,
					142,
					153,
					159,
					165,
					159,
					146,
					141,
					149,
					130,
					120,
					120,
					115,
					115,
					97,
					124,
					137,
					135,
					133,
					null,
					null,
					null,
					122,
					123,
					135,
					122,
					111,
					111,
					112,
					106,
					101,
					115,
					107,
					108,
					94,
					100,
					99,
					108,
					90,
					84,
					113,
					114,
					109,
					98,
				],
			};

			// Second chart data (starting from 1/1/1401)
			const chart2Data = {
				goldData: {
					realData: [
						13076000, 13561000, 14390000, 13536000, 12337000, 13212000,
						13493170, 14924440, 17775440, 20360960, 22981100, 26339970,
						25980000, 25648000, 23120000, 22889000, 23166000, 23270000,
						24286000, 24212000, 24672000, 27285000, 28266000, 32975000,
						37650000, 33783000, 33714000, 33610000, 35803000, 37881000,
						43364000, 45026000, 48985000, 52309000, 66000300, 79757000,
						65850000, 64940000, 74027250, 71320000,
					],
					// Scaled data for visualization (divided by 100 to be comparable with stock index)
					scaledData: [
						130760, 135610, 143900, 135360, 123370, 132120, 134932, 149244,
						177754, 203610, 229811, 263400, 259800, 256480, 231200, 228890,
						231660, 232700, 242860, 242120, 246720, 272850, 282660, 329750,
						376500, 337830, 337140, 336100, 358030, 378810, 433640, 450260,
						489850, 523090, 660000, 797570, 658500, 649400, 740270, 713200,
					],
				},
				// Stock index data from 1/1/1401 onwards (from the original data)
				stockIndexData: {
					realData: [
						1512219,
						1582144,
						1533394,
						1473498,
						1431477,
						1355241,
						1296798,
						1407654,
						1496201,
						1657577,
						1594263,
						1960457,
						2324133,
						2318507,
						2173893,
						null,
						null,
						null,
						2032212,
						2022787,
						2211856,
						2166928,
						2070775,
						2195092,
						2201987,
						2112560,
						2043980,
						2172192,
						2037209,
						2097005,
						2007281,
						2257614,
						2501778,
						2849940,
						2719339,
						2709764,
						3077924,
						3108119,
						2984605,
						2843904,
					],
					// Scaled data (already scaled by 10 in original data)
					scaledData: [
						151222,
						158214,
						153339,
						147350,
						143148,
						135524,
						129680,
						140765,
						149620,
						165758,
						159426,
						196046,
						232413,
						231851,
						217389,
						null,
						null,
						null,
						203221,
						202279,
						221186,
						216693,
						207078,
						219509,
						220199,
						211256,
						204398,
						217219,
						203721,
						209701,
						200728,
						225761,
						250178,
						284994,
						271934,
						270976,
						307792,
						310812,
						298461,
						284390,
					],
				},
				// Inflation data from 1/1/1401 onwards
				inflationData: {
					realData: [
						495.1, 520.4, 575.4, 600.4, 614.8, 631, 649.5, 663.5, 679.8, 713.4,
						745.1, 794.3, 834.9, 858.3, 885.8, 908.8, 940.6, 971.6, 995.9,
						1014.8, 1048.3, 1066.1, 1076.8, 1097.3, 1125.8, 1159.6, 1206,
						1242.2, 1277, 1306.4, 1339.1, 1379.3, 1402.7, 1433.6, 1485.2,
						1531.2, 1589.5, 1625.7, 1689.2, 1720.0,
					],
					// Scaled data for visualization (multiplied by 200)
					scaledData: [
						99020, 104080, 115080, 120080, 122960, 126200, 129900, 132700,
						135960, 142680, 149020, 158860, 166980, 171660, 177160, 181760,
						188120, 194320, 199180, 202960, 209660, 213220, 215360, 219460,
						225160, 231920, 241200, 248440, 255400, 261280, 267820, 275860,
						280540, 286720, 297040, 306240, 317900, 325140, 337840, 344000,
					],
				},
				// New data for red color (divided by 3 for scaling)
				newData: {
					realData: [
						342727, 363515, 394145, 417049, 427299, 432169, 437249, 467048,
						480737, 519814, 571444, 652414, 664400, 753200, 783000, 765400,
						757900, 753300, 760600, 757700, 740900, 753900, 784800, 814400,
						816300, 847500, 859100, 874600, 885000, 935200, 966300, 996700,
						1020800, 1050800, 1078100, 1100000, 1124000, 1150000, 1170000,
						1195000,
					],
					// Scaled data for visualization (divided by 3)
					scaledData: [
						114242, 121172, 131382, 139016, 142433, 144056, 145750, 155683,
						160246, 173271, 190481, 217471, 221467, 251067, 261000, 255133,
						252633, 251100, 253533, 252567, 246967, 251300, 261600, 271467,
						272100, 282500, 286367, 291533, 295000, 311733, 322100, 332233,
						340267, 350267, 359367, 366667, 374667, 383333, 390000, 398333,
					],
				},
				labels: [
					'فروردین 1401',
					'اردیبهشت 1401',
					'خرداد 1401',
					'تیر 1401',
					'مرداد 1401',
					'شهریور 1401',
					'مهر 1401',
					'آبان 1401',
					'آذر 1401',
					'دی 1401',
					'بهمن 1401',
					'اسفند 1401',
					'فروردین 1402',
					'اردیبهشت 1402',
					'خرداد 1402',
					'تیر 1402',
					'مرداد 1402',
					'شهریور 1402',
					'مهر 1402',
					'آبان 1402',
					'آذر 1402',
					'دی 1402',
					'بهمن 1402',
					'اسفند 1402',
					'فروردین 1403',
					'اردیبهشت 1403',
					'خرداد 1403',
					'تیر 1403',
					'مرداد 1403',
					'شهریور 1403',
					'مهر 1403',
					'آبان 1403',
					'آذر 1403',
					'دی 1403',
					'بهمن 1403',
					'اسفند 1403',
					'فروردین 1404',
					'اردیبهشت 1404',
					'خرداد 1404',
					'تیر 1404',
				],
			};

			const chartData = {
				type: 'line',
				data: {
					labels: [
						'فروردین 1398',
						'اردیبهشت 1398',
						'خرداد 1398',
						'تیر 1398',
						'مرداد 1398',
						'شهریور 1398',
						'مهر 1398',
						'آبان 1398',
						'آذر 1398',
						'دی 1398',
						'بهمن 1398',
						'اسفند 1398',
						'فروردین 1399',
						'اردیبهشت 1399',
						'خرداد 1399',
						'تیر 1399',
						'مرداد 1399',
						'شهریور 1399',
						'مهر 1399',
						'آبان 1399',
						'آذر 1399',
						'دی 1399',
						'بهمن 1399',
						'اسفند 1399',
						'فروردین 1400',
						'اردیبهشت 1400',
						'خرداد 1400',
						'تیر 1400',
						'مرداد 1400',
						'شهریور 1400',
						'مهر 1400',
						'آبان 1400',
						'آذر 1400',
						'دی 1400',
						'بهمن 1400',
						'اسفند 1400',
						'فروردین 1401',
						'اردیبهشت 1401',
						'خرداد 1401',
						'تیر 1401',
						'مرداد 1401',
						'شهریور 1401',
						'مهر 1401',
						'آبان 1401',
						'آذر 1401',
						'دی 1401',
						'بهمن 1401',
						'اسفند 1401',
						'فروردین 1402',
						'اردیبهشت 1402',
						'خرداد 1402',
						'تیر 1402',
						'مرداد 1402',
						'شهریور 1402',
						'مهر 1402',
						'آبان 1402',
						'آذر 1402',
						'دی 1402',
						'بهمن 1402',
						'اسفند 1402',
						'فروردین 1403',
						'اردیبهشت 1403',
						'خرداد 1403',
						'تیر 1403',
						'مرداد 1403',
						'شهریور 1403',
						'مهر 1403',
						'آبان 1403',
						'آذر 1403',
						'دی 1403',
						'بهمن 1403',
						'اسفند 1403',
						'فروردین 1404',
						'اردیبهشت 1404',
						'خرداد 1404',
						'تیر 1404',
					],
					datasets: [
						{
							label: 'شاخص بورس / 10',
							data: [
								20438, 21517, 23389, 25128, 26613, 31147, 30581, 30500, 35672,
								40601, 47876, 51290, 70899, 98676, 130081, 190117, 172726,
								158121, 141235, 136654, 143639, 118398, 123272, 130766, 120705,
								112816, 118691, 131131, 151589, 138647, 140776, 140713, 135901,
								127945, 127430, 136725, 151222, 158214, 153339, 147350, 143148,
								135524, 129680, 140765, 149620, 165758, 159426, 196046, 232413,
								231851, 217389, 210305, 206763, 204992, 203221, 202279, 221186,
								216693, 207078, 219509, 220199, 211256, 204398, 217219, 203721,
								209700, 200728, 225761, 250178, 284994, 271934, 270976, 307792,
								310812, 298461, 284390,
							],
							borderColor: '#3182ce',
							backgroundColor: 'rgba(49, 130, 206, 0.08)',
							fill: true,
							tension: 0.4,
							borderWidth: 3,
							pointRadius: 0,
							pointHoverRadius: 8,
							pointBackgroundColor: '#3182ce',
							pointBorderColor: '#ffffff',
							pointBorderWidth: 2,
							pointHoverBackgroundColor: '#3182ce',
							pointHoverBorderColor: '#ffffff',
						},
						{
							label: 'ارزش کل بورس (میلیارد ریال) / 1000',
							data: [
								6226, 6554, 7124, 7654, 8107, 9488, 9315, 9291, 10866, 12368,
								14583, 15624, 21597, 30058, 39624, 57912, 52615, 48166, 43022,
								41626, 43754, 36066, 37550, 39833, 36768, 34365, 36155, 39944,
								46176, 42234, 42882, 42863, 41397, 38974, 38817, 41648, 46064,
								48194, 46709, 44885, 43605, 41282, 39502, 42879, 45576, 50492,
								48563, 59718, 70796, 70625, 66220, 64062, 62983, 62443, 61904,
								61617, 67376, 66007, 63078, 66865, 67075, 64351, 62262, 66168,
								62056, 63877, 61144, 68770, 76207, 86813, 82835, 82543, 93758,
								94677, 90915, 86629,
							],
							borderColor: '#e53e3e',
							backgroundColor: 'rgba(229, 62, 62, 0.08)',
							fill: true,
							tension: 0.4,
							borderWidth: 3,
							pointRadius: 0,
							pointHoverRadius: 8,
							pointBackgroundColor: '#e53e3e',
							pointBorderColor: '#ffffff',
							pointBorderWidth: 2,
							pointHoverBackgroundColor: '#e53e3e',
							pointHoverBorderColor: '#ffffff',
						},
						{
							label: 'نرخ دلار (ریال) / 10',
							data: [
								13470, 14235, 13200, 12524, 11600, 11393, 11232, 11794, 13169,
								13439, 14393, 14903, 15442, 17701, 19480, 21800, 22502, 27497,
								29644, 25620, 25604, 22645, 25171, 23963, 24184, 22300, 24259,
								24628, 27666, 27521, 27415, 28440, 30077, 27525, 25417, 26252,
								27862, 30323, 31978, 31883, 29344, 31673, 32812, 35658, 39761,
								43976, 49902, 48101, 51607, 52331, 49731, 48336, 49023, 49393,
								50636, 50199, 50076, 54223, 57036, 60351, 60090, 60560, 61480,
								57611, 58160, 59230, 64855, 68930, 76755, 80670, 91995, 97780,
								82790, 83190, 83535, 88110,
							],
							borderColor: '#38a169',
							backgroundColor: 'rgba(56, 161, 105, 0.08)',
							fill: true,
							tension: 0.4,
							borderWidth: 3,
							pointRadius: 0,
							pointHoverRadius: 8,
							pointBackgroundColor: '#38a169',
							pointBorderColor: '#ffffff',
							pointBorderWidth: 2,
							pointHoverBackgroundColor: '#38a169',
							pointHoverBorderColor: '#ffffff',
						},
						{
							label: 'ارزش کل بورس (میلیارد دلار) × 500',
							data: [
								23109, 23022, 26986.5, 30558.5, 34942, 41639, 41467.5, 39387,
								41256.5, 46013.5, 50662, 52417.5, 69929, 84904.5, 101705.5,
								132826, 116911, 87583.5, 72564.5, 81238, 85444.5, 79632.5,
								74590, 83113.5, 76017.5, 77052.5, 74518, 81095, 83452.5,
								76729.5, 78209, 75357, 68818.5, 70797, 76360, 79324, 82665,
								79468, 73033.5, 70389.5, 74299, 65169.5, 60194.5, 60125.5,
								57312.5, 57408.5, 48658.5, 62075, 68591.5, 67479, 66578, 63852,
								62489, 61807.5, 61126, 61372.5, 67273.5, 60866.5, 55297, 55397,
								55812.5, 53130, 50636, 57426.5, 53349.5, 53923, 47139.5, 49884,
								49643.5, 53807.5, 45021, 42208.5, 56623.5, 56904.5, 54417.5,
								49159.5,
							],
							borderColor: '#d69e2e',
							backgroundColor: 'rgba(214, 158, 46, 0.08)',
							fill: true,
							tension: 0.4,
							borderWidth: 3,
							pointRadius: 0,
							pointHoverRadius: 8,
							pointBackgroundColor: '#d69e2e',
							pointBorderColor: '#ffffff',
							pointBorderWidth: 2,
							pointHoverBackgroundColor: '#d69e2e',
							pointHoverBorderColor: '#ffffff',
						},
					],
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					devicePixelRatio: 2,
					backgroundColor: '#FFFFFF',
					interaction: {
						intersect: false,
						mode: 'index',
					},
					plugins: {
						legend: {
							position: 'top',
							labels: {
								color: '#1a202c',
								font: {
									size: 13,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
								padding: 20,
								usePointStyle: true,
								pointStyle: 'circle',
								boxWidth: 8,
								boxHeight: 8,
							},
						},
						title: {
							display: false,
						},
						tooltip: {
							backgroundColor: 'rgba(26, 32, 44, 0.95)',
							titleColor: '#ffffff',
							bodyColor: '#ffffff',
							borderColor: '#e2e8f0',
							borderWidth: 1,
							cornerRadius: 8,
							displayColors: true,
							titleFont: {
								size: 14,
								family: "'IRANSansX', sans-serif",
								weight: '600',
							},
							bodyFont: {
								size: 13,
								family: "'IRANSansX', sans-serif",
							},
							padding: 12,
							callbacks: {
								label: function (context) {
									const dataIndex = context.dataIndex;
									const datasetIndex = context.datasetIndex;
									const scaledValue = context.parsed.y;

									// Get real value based on dataset
									let realValue;
									let label;

									switch (datasetIndex) {
										case 0: // Stock Index
											realValue = realData.stockIndex[dataIndex];
											label = 'شاخص بورس';
											break;
										case 1: // Market Value Rial
											realValue = realData.marketValueRial[dataIndex];
											label = 'ارزش کل بورس (میلیارد ریال)';
											break;
										case 2: // Dollar Rate
											realValue = realData.dollarRate[dataIndex];
											label = 'نرخ دلار (ریال)';
											break;
										case 3: // Market Value USD
											realValue = realData.marketValueUSD[dataIndex];
											label = 'ارزش کل بورس (میلیارد دلار)';
											break;
										default:
											return context.dataset.label + ': ' + scaledValue;
									}

									// Format the real value with Persian numbers
									const formattedValue = realValue.toLocaleString('fa-IR');
									return label + ': ' + formattedValue;
								},
							},
						},
					},
					scales: {
						y: {
							type: 'linear',
							position: 'left',
							title: {
								display: true,
								text: 'مقادیر مقیاس‌شده',
								color: '#1a202c',
								font: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
							},
							min: 0,
							max: 350000,
							grid: {
								color: 'rgba(226, 232, 240, 0.8)',
								borderColor: '#e2e8f0',
								drawBorder: true,
								lineWidth: 1,
								drawTicks: false,
							},
							ticks: {
								color: '#718096',
								font: {
									size: 12,
									family: "'IRANSansX', sans-serif",
									weight: '500',
								},
								padding: 8,
								callback: function (value) {
									return value.toLocaleString('fa-IR');
								},
							},
						},
						x: {
							title: {
								display: true,
								text: 'ماه/سال',
								color: '#1a202c',
								font: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
							},
							grid: {
								color: 'rgba(226, 232, 240, 0.8)',
								drawBorder: true,
								borderColor: '#e2e8f0',
								lineWidth: 1,
								drawTicks: false,
							},
							ticks: {
								maxRotation: 45,
								minRotation: 45,
								color: '#718096',
								font: {
									size: 10,
									family: "'IRANSansX', sans-serif",
									weight: '500',
								},
								padding: 5,
								maxTicksLimit: 84,
								autoSkip: false,
							},
						},
					},
				},
			};

			// Tab switching function
			function switchTab(tabId) {
				// Hide all chart containers
				document.querySelectorAll('.chart-container').forEach((container) => {
					container.classList.remove('active');
				});

				// Remove active class from all tab buttons
				document.querySelectorAll('.tab-button').forEach((button) => {
					button.classList.remove('active');
				});

				// Show selected chart container
				document.getElementById(tabId).classList.add('active');

				// Add active class to clicked button
				event.target.classList.add('active');

				// Update stat boxes based on active chart
				updateStatBoxes(tabId);
			}

			// Function to update stat boxes based on active chart
			function updateStatBoxes(activeTab) {
				const statCards = document.querySelectorAll('.stat-card');

				if (activeTab === 'chart1') {
					// First chart stats (Financial Indicators) - Fixed colors
					statCards.forEach((card) => {
						card.style.display = 'block';
					});

					statCards[0].querySelector('.stat-value').textContent = '3,108,119';
					statCards[0].querySelector('.stat-value').style.color = '#3182ce'; // Blue
					statCards[0].querySelector('.stat-label').textContent =
						'بالاترین شاخص بورس';

					statCards[1].querySelector('.stat-value').textContent = '94,677,309';
					statCards[1].querySelector('.stat-value').style.color = '#e53e3e'; // Red
					statCards[1].querySelector('.stat-label').textContent =
						'بالاترین ارزش کل بورس (ریال)';

					statCards[2].querySelector('.stat-value').textContent = '977,800';
					statCards[2].querySelector('.stat-value').style.color = '#38a169'; // Green
					statCards[2].querySelector('.stat-label').textContent =
						'بالاترین نرخ دلار (ریال)';

					statCards[3].querySelector('.stat-value').textContent = '266';
					statCards[3].querySelector('.stat-value').style.color = '#d69e2e'; // Yellow
					statCards[3].querySelector('.stat-label').textContent =
						'بالاترین ارزش کل بورس (دلار)';
				} else if (activeTab === 'periodic-comparison') {
					// Periodic comparison tab - hide stat boxes for now
					statCards.forEach((card) => {
						card.style.display = 'none';
					});
				} else if (activeTab === 'chart2') {
					// Second chart stats (Percentage changes from 1/1/1401)
					statCards.forEach((card) => {
						card.style.display = 'block';
					});

					statCards[0].querySelector('.stat-value').textContent = '445%+';
					statCards[0].querySelector('.stat-value').style.color = '#fbbf24';
					statCards[0].querySelector('.stat-label').textContent =
						'تغییر قیمت طلا (۱۴۰۱-۱۴۰۴)';

					statCards[1].querySelector('.stat-value').textContent = '88%+';
					statCards[1].querySelector('.stat-value').style.color = '#3182ce';
					statCards[1].querySelector('.stat-label').textContent =
						'تغییر شاخص بورس (۱۴۰۱-۱۴۰۴)';

					statCards[2].querySelector('.stat-value').textContent = '241%+';
					statCards[2].querySelector('.stat-value').style.color = '#38a169';
					statCards[2].querySelector('.stat-label').textContent =
						'تغییر نرخ تورم (۱۴۰۱-۱۴۰۴)';

					statCards[3].querySelector('.stat-value').textContent = '249%+';
					statCards[3].querySelector('.stat-value').style.color = '#e53e3e';
					statCards[3].querySelector('.stat-label').textContent =
						'تغییر قیمت مسکن (۱۴۰۱-۱۴۰۴)';
				} else if (activeTab === 'tables') {
					// Tables tab - hide stat boxes
					statCards.forEach((card) => {
						card.style.display = 'none';
					});
				} else if (activeTab === 'comparison') {
					// Comparison tab - hide stat boxes
					statCards.forEach((card) => {
						card.style.display = 'none';
					});

					// Populate comparison tables
					populateComparisonTables();
				}
			}

			const ctx = document.getElementById('myChart').getContext('2d');
			new Chart(ctx, chartData);

			// Second chart configuration
			const chart2Config = {
				type: 'line',
				data: {
					labels: chart2Data.labels,
					datasets: [
						{
							label: 'طلای ۱۸ عیار / 100',
							data: chart2Data.goldData.scaledData,
							borderColor: '#fbbf24',
							backgroundColor: 'rgba(251, 191, 36, 0.08)',
							fill: true,
							tension: 0.4,
							borderWidth: 3,
							pointRadius: 0,
							pointHoverRadius: 8,
							pointBackgroundColor: '#fbbf24',
							pointBorderColor: '#ffffff',
							pointBorderWidth: 2,
							pointHoverBackgroundColor: '#fbbf24',
							pointHoverBorderColor: '#ffffff',
							spanGaps: true,
						},
						{
							label: 'شاخص بورس / 10',
							data: chart2Data.stockIndexData.scaledData,
							borderColor: '#3182ce',
							backgroundColor: 'rgba(49, 130, 206, 0.08)',
							fill: true,
							tension: 0.4,
							borderWidth: 3,
							pointRadius: 0,
							pointHoverRadius: 8,
							pointBackgroundColor: '#3182ce',
							pointBorderColor: '#ffffff',
							pointBorderWidth: 2,
							pointHoverBackgroundColor: '#3182ce',
							pointHoverBorderColor: '#ffffff',
							spanGaps: true,
						},
						{
							label: 'تورم × 200',
							data: chart2Data.inflationData.scaledData,
							borderColor: '#38a169',
							backgroundColor: 'rgba(56, 161, 105, 0.08)',
							fill: true,
							tension: 0.4,
							borderWidth: 3,
							pointRadius: 0,
							pointHoverRadius: 8,
							pointBackgroundColor: '#38a169',
							pointBorderColor: '#ffffff',
							pointBorderWidth: 2,
							pointHoverBackgroundColor: '#38a169',
							pointHoverBorderColor: '#ffffff',
							spanGaps: true,
						},
						{
							label: 'قیمت مسکن / 3',
							data: chart2Data.newData.scaledData,
							borderColor: '#e53e3e',
							backgroundColor: 'rgba(229, 62, 62, 0.08)',
							fill: true,
							tension: 0.4,
							borderWidth: 3,
							pointRadius: 0,
							pointHoverRadius: 8,
							pointBackgroundColor: '#e53e3e',
							pointBorderColor: '#ffffff',
							pointBorderWidth: 2,
							pointHoverBackgroundColor: '#e53e3e',
							pointHoverBorderColor: '#ffffff',
							spanGaps: true,
						},
					],
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					devicePixelRatio: 2,
					backgroundColor: '#FFFFFF',
					interaction: {
						intersect: false,
						mode: 'index',
					},
					plugins: {
						legend: {
							position: 'top',
							labels: {
								color: '#1a202c',
								font: {
									size: 13,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
								padding: 20,
								usePointStyle: true,
								pointStyle: 'circle',
								boxWidth: 8,
								boxHeight: 8,
							},
						},
						title: {
							display: false,
						},
						tooltip: {
							backgroundColor: 'rgba(26, 32, 44, 0.95)',
							titleColor: '#ffffff',
							bodyColor: '#ffffff',
							borderColor: '#e2e8f0',
							borderWidth: 1,
							cornerRadius: 8,
							displayColors: true,
							titleFont: {
								size: 14,
								family: "'IRANSansX', sans-serif",
								weight: '600',
							},
							bodyFont: {
								size: 13,
								family: "'IRANSansX', sans-serif",
							},
							padding: 12,
							callbacks: {
								label: function (context) {
									const dataIndex = context.dataIndex;
									const datasetIndex = context.datasetIndex;

									if (datasetIndex === 0) {
										// Gold data
										const realValue = chart2Data.goldData.realData[dataIndex];
										const formattedValue = realValue.toLocaleString('fa-IR');
										return 'طلای ۱۸ عیار: ' + formattedValue;
									} else if (datasetIndex === 1) {
										// Stock index data
										const realValue =
											chart2Data.stockIndexData.realData[dataIndex];
										if (realValue === null) {
											return 'شاخص بورس: داده موجود نیست';
										}
										const formattedValue = realValue.toLocaleString('fa-IR');
										return 'شاخص بورس: ' + formattedValue;
									} else if (datasetIndex === 2) {
										// Inflation data
										const realValue =
											chart2Data.inflationData.realData[dataIndex];
										const formattedValue = realValue.toLocaleString('fa-IR');
										return 'تورم: ' + formattedValue;
									} else {
										// Housing price data
										const realValue = chart2Data.newData.realData[dataIndex];
										const formattedValue = realValue.toLocaleString('fa-IR');
										return 'قیمت مسکن: ' + formattedValue;
									}
								},
							},
						},
					},
					scales: {
						y: {
							type: 'linear',
							position: 'left',
							title: {
								display: true,
								text: 'مقادیر مقیاس‌شده',
								color: '#1a202c',
								font: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
							},
							min: 0,
							max: 900000,
							grid: {
								color: 'rgba(226, 232, 240, 0.8)',
								borderColor: '#e2e8f0',
								drawBorder: true,
								lineWidth: 1,
								drawTicks: false,
							},
							ticks: {
								color: '#718096',
								font: {
									size: 12,
									family: "'IRANSansX', sans-serif",
									weight: '500',
								},
								padding: 8,
								callback: function (value) {
									return value.toLocaleString('fa-IR');
								},
							},
						},
						x: {
							title: {
								display: true,
								text: 'ماه/سال',
								color: '#1a202c',
								font: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
							},
							grid: {
								color: 'rgba(226, 232, 240, 0.8)',
								drawBorder: true,
								borderColor: '#e2e8f0',
								lineWidth: 1,
								drawTicks: false,
							},
							ticks: {
								maxRotation: 45,
								minRotation: 45,
								color: '#718096',
								font: {
									size: 10,
									family: "'IRANSansX', sans-serif",
									weight: '500',
								},
								padding: 5,
								maxTicksLimit: 52,
								autoSkip: false,
							},
						},
					},
				},
			};

			// Initialize second chart
			const ctx2 = document.getElementById('myChart2').getContext('2d');
			new Chart(ctx2, chart2Config);

			// Periodic comparison data structure
			const periodicData = {
				// Period 1: از ابتدای اسفند ۱۳۹۸ تا ابتدای دی ۱۴۰۰
				period1: {
					startDate: 'اسفند ۱۳۹۸',
					endDate: 'دی ۱۴۰۰',
					stockIndex: [
						204375, 215168, 233886, 251278, 266127, 311471, 305807, 304997,
						356721, 406008, 478755, 512900, 708995, 986759, 1300813, 1901169,
						1727265, 1581206, 1412355, 1366535, 1436393, 1183978, 1232716,
						1307657, 1207047, 1128164, 1186906, 1311306, 1515887, 1386466,
						1407758, 1407133, 1359011, 1279450, 1274305, 1367250, 1512219,
						1582144, 1533394, 1473498, 1431477, 1355241, 1296798, 1407654,
						1496201, 1657577, 1594263, 1960457, 2324133, 2318507, 2173893,
					],
					marketValueRial: [
						6225526, 6554295, 7124469, 7654252, 8106571, 9487808, 9315275,
						9290602, 10866181, 12367527, 14583494, 15623595, 21596889, 30057957,
						39624433, 57912068, 52614714, 48165581, 43022143, 41626423,
						43754378, 36065501, 37550121, 39832929, 36768204, 34365332,
						36154671, 39944070, 46175856, 42233550, 42882122, 42863081,
						41397226, 38973689, 38816963, 41648206, 46064142, 48194139,
						46709154, 44884651, 43604640, 41282384, 39502132, 42878958,
						45576204, 50491922, 48563302, 59718058, 70796076, 70624695,
						66219594,
					],
					dollarRate: [
						134700, 142350, 132000, 125240, 116000, 113930, 112320, 117940,
						131690, 134390, 143930, 149030, 154420, 177010, 194800, 218000,
						225020, 274970, 296440, 256200, 256040, 226450, 251710, 239630,
						241840, 223000, 242590, 246280, 276660, 275210, 274150, 284400,
						300770, 275250, 254170, 262520, 278620, 303230, 319780, 318830,
						293440, 316730, 328120, 356580, 397610, 439761, 499020, 481014,
						516069, 523310, 497310, 483360, 490230, 493930, 506362, 501990,
						500760, 542230, 570360, 603510, 600900, 605600, 614800, 576110,
						581600, 592300, 648550, 689300, 767550, 806700, 919950, 977800,
						827900, 831900, 835350, 881100,
					],
					marketValueUSD: [
						46, 46, 54, 61, 70, 83, 83, 79, 83, 92, 101, 105, 140, 170, 203,
						266, 234, 175, 145, 162, 171, 159, 149, 166, 152, 154, 149, 162,
						167, 153, 156, 151, 138, 142, 153, 159, 165, 159, 146, 141, 149,
						130, 120, 120, 115, 115, 97, 124, 137, 135, 133,
					],
					goldPrice: [
						13076000, 13561000, 14390000, 13536000, 12337000, 13212000,
						13493170, 14924440, 17775440, 20360960, 22981100, 26339970,
						25980000, 25648000, 23120000, 22889000, 23166000, 23270000,
						24286000, 24212000, 24672000, 27285000, 28266000, 32975000,
						37650000, 33783000, 33714000, 33610000, 35803000, 37881000,
						43364000, 45026000, 48985000, 52309000, 66000300, 79757000,
						65850000, 64940000, 74027250, 71320000,
					],
					inflation: [
						495.1, 520.4, 575.4, 600.4, 614.8, 631, 649.5, 663.5, 679.8, 713.4,
						745.1, 794.3, 834.9, 858.3, 885.8, 908.8, 940.6, 971.6, 995.9,
						1014.8, 1048.3, 1066.1, 1076.8, 1097.3, 1125.8, 1159.6, 1206,
						1242.2, 1277, 1306.4, 1339.1, 1379.3, 1402.7, 1433.6, 1485.2,
						1531.2, 1589.5, 1625.7, 1689.2, 1720.0,
					],
					housingPrice: [
						342727, 363515, 394145, 417049, 427299, 432169, 437249, 467048,
						480737, 519814, 571444, 652414, 664400, 753200, 783000, 765400,
						757900, 753300, 760600, 757700, 740900, 753900, 784800, 814400,
						816300, 847500, 859100, 874600, 885000, 935200, 966300, 996700,
						1020800, 1050800, 1078100, 1100000, 1124000, 1150000, 1170000,
						1195000,
					],
				},
				// Period 2: از ابتدای ۱۴۰۲ تا ۱۵ تیر ۱۴۰۴
				period2: {
					startDate: 'فروردین ۱۴۰۲',
					endDate: 'تیر ۱۴۰۴',
					stockIndex: [
						2032212, 2022787, 2211856, 2166928, 2070775, 2195092, 2201987,
						2112560, 2043980, 2172192, 2037209, 2097005, 2007281, 2257614,
						2501778, 2849940, 2719339, 2709764, 3077924, 3108119, 2984605,
						2843904,
					],
					marketValueRial: [
						61903799, 61616690, 67375993, 66007414, 63078484, 66865340,
						67075358, 64351309, 62262277, 66167770, 62056008, 63877460,
						61144372, 68769824, 76207371, 86812850, 82834562, 82542906,
						93757528, 94677309, 90914927, 86628981,
					],
					dollarRate: [
						490230, 493930, 506362, 501990, 500760, 542230, 570360, 603510,
						600900, 605600, 614800, 576110, 581600, 592300, 648550, 689300,
						767550, 806700, 919950, 977800, 827900, 831900, 835350, 881100,
					],
					marketValueUSD: [
						122, 123, 135, 122, 111, 111, 112, 106, 101, 115, 107, 108, 94, 100,
						99, 108, 90, 84, 113, 114, 109, 98,
					],
					goldPrice: [65850000, 64940000, 74027250, 71320000],
					inflation: [1589.5, 1625.7, 1689.2, 1720.0],
					housingPrice: [1124000, 1150000, 1170000, 1195000],
				},
			};

			// Initialize periodic comparison charts
			function initializePeriodicCharts() {
				// Average monthly percentage changes for each metric
				const monthlyPercentages = {
					stockIndex: { period1: 8.36, period2: 2.61 },
					marketValueRial: { period1: 8.36, period2: 2.7 },
					marketValueUSD: { period1: 1.67, period2: -0.96 },
					goldPrice: { period1: 6.84, period2: 13.56 },
					dollarRate: { period1: 4.75, period2: 5.97 },
					inflation: { period1: 5.15, period2: 6.21 },
					housingPrice: { period1: 6.45, period2: 6.19 },
				};

				// Total percentage changes for each metric
				const totalPercentages = {
					stockIndex: { period1: 183.6, period2: 104.47 },
					marketValueRial: { period1: 183.6, period2: 108.0 },
					marketValueUSD: { period1: 33.4, period2: -38.36 },
					goldPrice: { period1: 150.42, period2: 542.37 },
					dollarRate: { period1: 104.57, period2: 238.94 },
					inflation: { period1: 113.21, period2: 248.58 },
					housingPrice: { period1: 141.81, period2: 247.66 },
				};

				// Time labels for each period - both periods start at the same point
				const periodLabels = ['شروع دوره', 'پایان دوره'];

				// Chart 1: Stock Index
				const ctxPeriodic1 = document
					.getElementById('periodicChart1')
					.getContext('2d');
				new Chart(ctxPeriodic1, {
					type: 'line',
					data: {
						labels: periodLabels,
						datasets: [
							{
								label: 'ابتدای اسفند ۹۸ - ابتدای دیماه ۱۴۰۰',
								data: [0, monthlyPercentages.stockIndex.period1],
								borderColor: '#3182ce',
								backgroundColor: 'rgba(49, 130, 206, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#3182ce',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'ابتدای ۱۴۰۱ - انتهای تیر ۱۴۰۴',
								data: [0, monthlyPercentages.stockIndex.period2],
								borderColor: '#3182ce',
								backgroundColor: 'rgba(49, 130, 206, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [10, 5],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#3182ce',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
						],
					},
					options: getChartOptions('شاخص بورس'),
				});

				// Chart 2: Market Value Rial
				const ctxPeriodic2 = document
					.getElementById('periodicChart2')
					.getContext('2d');
				new Chart(ctxPeriodic2, {
					type: 'line',
					data: {
						labels: periodLabels,
						datasets: [
							{
								label: 'ابتدای اسفند ۹۸ - ابتدای دیماه ۱۴۰۰',
								data: [0, monthlyPercentages.marketValueRial.period1],
								borderColor: '#e53e3e',
								backgroundColor: 'rgba(229, 62, 62, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#e53e3e',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'ابتدای ۱۴۰۱ - انتهای تیر ۱۴۰۴',
								data: [0, monthlyPercentages.marketValueRial.period2],
								borderColor: '#e53e3e',
								backgroundColor: 'rgba(229, 62, 62, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [10, 5],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#e53e3e',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
						],
					},
					options: getChartOptions('ارزش ریالی بورس'),
				});

				// Chart 3: Market Value USD
				const ctxPeriodic3 = document
					.getElementById('periodicChart3')
					.getContext('2d');
				new Chart(ctxPeriodic3, {
					type: 'line',
					data: {
						labels: periodLabels,
						datasets: [
							{
								label: 'ابتدای اسفند ۹۸ - ابتدای دیماه ۱۴۰۰',
								data: [0, monthlyPercentages.marketValueUSD.period1],
								borderColor: '#38a169',
								backgroundColor: 'rgba(56, 161, 105, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#38a169',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'ابتدای ۱۴۰۱ - انتهای تیر ۱۴۰۴',
								data: [0, monthlyPercentages.marketValueUSD.period2],
								borderColor: '#38a169',
								backgroundColor: 'rgba(56, 161, 105, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [10, 5],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#38a169',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
						],
					},
					options: getChartOptions('ارزش دلاری بورس'),
				});

				// Chart 4: Gold Price
				const ctxPeriodic4 = document
					.getElementById('periodicChart4')
					.getContext('2d');
				new Chart(ctxPeriodic4, {
					type: 'line',
					data: {
						labels: periodLabels,
						datasets: [
							{
								label: 'ابتدای اسفند ۹۸ - ابتدای دیماه ۱۴۰۰',
								data: [0, monthlyPercentages.goldPrice.period1],
								borderColor: '#d69e2e',
								backgroundColor: 'rgba(214, 158, 46, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#d69e2e',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'ابتدای ۱۴۰۱ - انتهای تیر ۱۴۰۴',
								data: [0, monthlyPercentages.goldPrice.period2],
								borderColor: '#d69e2e',
								backgroundColor: 'rgba(214, 158, 46, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [10, 5],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#d69e2e',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
						],
					},
					options: getChartOptions('سکه امامی جدید'),
				});

				// Chart 5: Dollar Rate
				const ctxPeriodic5 = document
					.getElementById('periodicChart5')
					.getContext('2d');
				new Chart(ctxPeriodic5, {
					type: 'line',
					data: {
						labels: periodLabels,
						datasets: [
							{
								label: 'ابتدای اسفند ۹۸ - ابتدای دیماه ۱۴۰۰',
								data: [0, monthlyPercentages.dollarRate.period1],
								borderColor: '#9f7aea',
								backgroundColor: 'rgba(159, 122, 234, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#9f7aea',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'ابتدای ۱۴۰۱ - انتهای تیر ۱۴۰۴',
								data: [0, monthlyPercentages.dollarRate.period2],
								borderColor: '#9f7aea',
								backgroundColor: 'rgba(159, 122, 234, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [10, 5],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#9f7aea',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
						],
					},
					options: getChartOptions('دلار'),
				});

				// Chart 6: Inflation
				const ctxPeriodic6 = document
					.getElementById('periodicChart6')
					.getContext('2d');
				new Chart(ctxPeriodic6, {
					type: 'line',
					data: {
						labels: periodLabels,
						datasets: [
							{
								label: 'ابتدای اسفند ۹۸ - ابتدای دیماه ۱۴۰۰',
								data: [0, monthlyPercentages.inflation.period1],
								borderColor: '#f56565',
								backgroundColor: 'rgba(245, 101, 101, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#f56565',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'ابتدای ۱۴۰۱ - انتهای تیر ۱۴۰۴',
								data: [0, monthlyPercentages.inflation.period2],
								borderColor: '#f56565',
								backgroundColor: 'rgba(245, 101, 101, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [10, 5],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#f56565',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
						],
					},
					options: getChartOptions('شاخص تورم'),
				});

				// Chart 7: Housing Price
				const ctxPeriodic7 = document
					.getElementById('periodicChart7')
					.getContext('2d');
				new Chart(ctxPeriodic7, {
					type: 'line',
					data: {
						labels: periodLabels,
						datasets: [
							{
								label: 'ابتدای اسفند ۹۸ - ابتدای دیماه ۱۴۰۰',
								data: [0, monthlyPercentages.housingPrice.period1],
								borderColor: '#ed8936',
								backgroundColor: 'rgba(237, 137, 54, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#ed8936',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'ابتدای ۱۴۰۱ - انتهای تیر ۱۴۰۴',
								data: [0, monthlyPercentages.housingPrice.period2],
								borderColor: '#f6ad55',
								backgroundColor: 'rgba(246, 173, 85, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [10, 5],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#f6ad55',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
						],
					},
					options: getChartOptions('مسکن'),
				});

				// Chart 8: Alternative Indicators - Combined Line Chart
				const ctxPeriodic8 = document
					.getElementById('periodicChart8')
					.getContext('2d');
				new Chart(ctxPeriodic8, {
					type: 'line',
					data: {
						labels: ['شروع دوره', 'پایان دوره'],
						datasets: [
							{
								label: 'مسکن - دوره اول',
								data: [0, totalPercentages.housingPrice.period1],
								borderColor: '#e53e3e',
								backgroundColor: 'rgba(229, 62, 62, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#e53e3e',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'مسکن - دوره دوم',
								data: [0, totalPercentages.housingPrice.period2],
								borderColor: '#e53e3e',
								backgroundColor: 'rgba(229, 62, 62, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [10, 5],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#e53e3e',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'دلار - دوره اول',
								data: [0, totalPercentages.dollarRate.period1],
								borderColor: '#9f7aea',
								backgroundColor: 'rgba(159, 122, 234, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#9f7aea',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'دلار - دوره دوم',
								data: [0, totalPercentages.dollarRate.period2],
								borderColor: '#9f7aea',
								backgroundColor: 'rgba(159, 122, 234, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [10, 5],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#9f7aea',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'سکه امامی جدید - دوره اول',
								data: [0, totalPercentages.goldPrice.period1],
								borderColor: '#d69e2e',
								backgroundColor: 'rgba(214, 158, 46, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#d69e2e',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'سکه امامی جدید - دوره دوم',
								data: [0, totalPercentages.goldPrice.period2],
								borderColor: '#d69e2e',
								backgroundColor: 'rgba(214, 158, 46, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [10, 5],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#d69e2e',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'شاخص کل - دوره اول',
								data: [0, totalPercentages.stockIndex.period1],
								borderColor: '#3182ce',
								backgroundColor: 'rgba(49, 130, 206, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#3182ce',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'شاخص کل - دوره دوم',
								data: [0, totalPercentages.stockIndex.period2],
								borderColor: '#3182ce',
								backgroundColor: 'rgba(49, 130, 206, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								borderDash: [10, 5],
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#3182ce',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
						],
					},
					options: {
						responsive: true,
						maintainAspectRatio: false,
						plugins: {
							title: {
								display: true,
								text: 'شاخص‌های جایگزین - مقایسه درصد تغییرات کل',
								font: {
									size: 16,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
							},
							legend: {
								position: 'top',
								onClick: function (e, legendItem, legend) {
									const index = legendItem.index;
									const chart = legend.chart;
									const meta = chart.getDatasetMeta(index);

									// Toggle visibility
									meta.hidden = !meta.hidden;
									chart.update();
								},
								labels: {
									color: '#1a202c',
									font: {
										size: 11,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									padding: 15,
									usePointStyle: false,
									generateLabels: function (chart) {
										const datasets = chart.data.datasets;
										return datasets.map((dataset, index) => {
											const meta = chart.getDatasetMeta(index);
											return {
												text: dataset.label,
												fillStyle: 'transparent',
												strokeStyle: dataset.borderColor,
												lineWidth: 3,
												lineDash: dataset.borderDash || [],
												pointStyle: 'line',
												hidden: meta.hidden,
												index: index,
											};
										});
									},
								},
							},
							tooltip: {
								backgroundColor: 'rgba(26, 32, 44, 0.95)',
								titleColor: '#ffffff',
								bodyColor: '#ffffff',
								borderColor: '#e2e8f0',
								borderWidth: 1,
								cornerRadius: 8,
								displayColors: true,
								titleFont: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
								bodyFont: {
									size: 13,
									family: "'IRANSansX', sans-serif",
								},
								padding: 12,
								callbacks: {
									label: function (context) {
										const datasetIndex = context.datasetIndex;
										const periodText =
											datasetIndex % 2 === 0 ? 'دوره اول' : 'دوره دوم';
										return (
											context.dataset.label +
											' (' +
											periodText +
											')' +
											': ' +
											context.parsed.y.toFixed(2) +
											'%'
										);
									},
								},
							},
						},
						scales: {
							y: {
								beginAtZero: true,
								title: {
									display: true,
									text: 'درصد تغییر کل',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									color: '#1a202c',
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
									},
									callback: function (value) {
										return value + '%';
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
							x: {
								title: {
									display: true,
									text: 'دوره زمانی',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									color: '#1a202c',
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
						},
					},
				});

				// Chart 9: Bar Chart 1 - Monthly Average Comparison
				const ctxPeriodic9 = document
					.getElementById('periodicChart9')
					.getContext('2d');
				new Chart(ctxPeriodic9, {
					type: 'bar',
					data: {
						labels: [
							'شاخص بورس',
							'ارزش ریالی بورس',
							'ارزش دلاری بورس',
							'سکه امامی جدید',
							'دلار',
							'شاخص تورم',
							'مسکن',
						],
						datasets: [
							{
								label: 'دوره اول (ابتدای اسفند ۹۸ - ابتدای دیماه ۱۴۰۰)',
								data: [
									monthlyPercentages.stockIndex.period1,
									monthlyPercentages.marketValueRial.period1,
									monthlyPercentages.marketValueUSD.period1,
									monthlyPercentages.goldPrice.period1,
									monthlyPercentages.dollarRate.period1,
									monthlyPercentages.inflation.period1,
									monthlyPercentages.housingPrice.period1,
								],
								backgroundColor: [
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
								],
								borderColor: [
									'#22c55e',
									'#22c55e',
									'#22c55e',
									'#22c55e',
									'#22c55e',
									'#22c55e',
									'#22c55e',
								],
								borderWidth: 2,
							},
							{
								label: 'دوره دوم (ابتدای ۱۴۰۱ - انتهای تیر ۱۴۰۴)',
								data: [
									monthlyPercentages.stockIndex.period2,
									monthlyPercentages.marketValueRial.period2,
									monthlyPercentages.marketValueUSD.period2,
									monthlyPercentages.goldPrice.period2,
									monthlyPercentages.dollarRate.period2,
									monthlyPercentages.inflation.period2,
									monthlyPercentages.housingPrice.period2,
								],
								backgroundColor: [
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
								],
								borderColor: [
									'#ef4444',
									'#ef4444',
									'#ef4444',
									'#ef4444',
									'#ef4444',
									'#ef4444',
									'#ef4444',
								],
								borderWidth: 3,
								borderDash: [5, 5],
								pattern: {
									backgroundColor: 'rgba(255, 255, 255, 0.1)',
									borderColor: 'rgba(255, 255, 255, 0.2)',
									borderWidth: 1,
								},
							},
						],
					},
					options: {
						responsive: true,
						maintainAspectRatio: false,
						plugins: {
							title: {
								display: true,
								text: 'نمودار میله‌ای مقایسه درصد تغییرات ماهانه همه شاخص‌ها',
								font: {
									size: 16,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
							},
							legend: {
								position: 'top',
								labels: {
									color: '#1a202c',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									padding: 15,
									usePointStyle: true,
									pointStyle: 'rect',
									generateLabels: function (chart) {
										const datasets = chart.data.datasets;
										return datasets.map((dataset, index) => {
											// For first period: use solid green
											// For second period: use solid red
											const fillColor =
												index === 0
													? 'rgba(34, 197, 94, 0.8)'
													: 'rgba(239, 68, 68, 0.8)';
											const strokeColor = index === 0 ? '#22c55e' : '#ef4444';

											return {
												text: dataset.label,
												fillStyle: fillColor,
												strokeStyle: strokeColor,
												lineWidth: 0,
												pointStyle: 'rect',
												hidden: false,
												index: index,
											};
										});
									},
								},
							},
							tooltip: {
								backgroundColor: 'rgba(26, 32, 44, 0.95)',
								titleColor: '#ffffff',
								bodyColor: '#ffffff',
								borderColor: '#e2e8f0',
								borderWidth: 1,
								cornerRadius: 8,
								displayColors: true,
								titleFont: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
								bodyFont: {
									size: 13,
									family: "'IRANSansX', sans-serif",
								},
								padding: 12,
								callbacks: {
									label: function (context) {
										const datasetIndex = context.datasetIndex;
										const periodText =
											datasetIndex === 0 ? 'دوره اول' : 'دوره دوم';
										return (
											context.dataset.label +
											' (' +
											periodText +
											')' +
											': ' +
											context.parsed.y.toFixed(2) +
											'%'
										);
									},
								},
							},
						},
						scales: {
							y: {
								beginAtZero: true,
								title: {
									display: true,
									text: 'درصد تغییر کل',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									color: '#1a202c',
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
									},
									callback: function (value) {
										return value + '%';
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
							x: {
								title: {
									display: true,
									text: 'شاخص‌های مالی',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									color: '#1a202c',
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
						},
					},
				});

				// Chart 10: Bar Chart 3 - Normalized Comparison (Period 1 × 40 months)
				const ctxPeriodic10 = document
					.getElementById('periodicChart10')
					.getContext('2d');
				new Chart(ctxPeriodic10, {
					type: 'bar',
					data: {
						labels: [
							'شاخص بورس',
							'ارزش ریالی بورس',
							'ارزش دلاری بورس',
							'سکه امامی جدید',
							'دلار',
							'شاخص تورم',
							'مسکن',
						],
						datasets: [
							{
								label: 'دوره اول (اسفند ۹۸ - دیماه ۱۴۰۰) × ۴۰ ماه',
								data: [
									monthlyPercentages.stockIndex.period1 * 40,
									monthlyPercentages.marketValueRial.period1 * 40,
									monthlyPercentages.marketValueUSD.period1 * 40,
									monthlyPercentages.goldPrice.period1 * 40,
									monthlyPercentages.dollarRate.period1 * 40,
									monthlyPercentages.inflation.period1 * 40,
									monthlyPercentages.housingPrice.period1 * 40,
								],
								backgroundColor: [
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
								],
								borderColor: [
									'#22c55e',
									'#22c55e',
									'#22c55e',
									'#22c55e',
									'#22c55e',
									'#22c55e',
									'#22c55e',
								],
								borderWidth: 2,
							},
							{
								label: 'دوره دوم (فروردین ۱۴۰۲ - تیر ۱۴۰۴) × ۴۰ ماه',
								data: [
									monthlyPercentages.stockIndex.period2 * 40,
									monthlyPercentages.marketValueRial.period2 * 40,
									monthlyPercentages.marketValueUSD.period2 * 40,
									monthlyPercentages.goldPrice.period2 * 40,
									monthlyPercentages.dollarRate.period2 * 40,
									monthlyPercentages.inflation.period2 * 40,
									monthlyPercentages.housingPrice.period2 * 40,
								],
								backgroundColor: [
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
								],
								borderColor: [
									'#ef4444',
									'#ef4444',
									'#ef4444',
									'#ef4444',
									'#ef4444',
									'#ef4444',
									'#ef4444',
								],
								borderWidth: 2,
								borderDash: [5, 5],
							},
						],
					},
					options: {
						responsive: true,
						maintainAspectRatio: false,
						plugins: {
							title: {
								display: true,
								text: 'نمودار میله‌ای شماره ۳: مقایسه نرمال‌شده دوره‌ها (۴۰ ماه)',
								font: {
									size: 16,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
							},
							legend: {
								position: 'top',
								labels: {
									color: '#1a202c',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									padding: 15,
									usePointStyle: true,
									pointStyle: 'rect',
								},
							},
							tooltip: {
								backgroundColor: 'rgba(26, 32, 44, 0.95)',
								titleColor: '#ffffff',
								bodyColor: '#ffffff',
								borderColor: '#e2e8f0',
								borderWidth: 1,
								cornerRadius: 8,
								displayColors: true,
								titleFont: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
								bodyFont: {
									size: 13,
									family: "'IRANSansX', sans-serif",
								},
								padding: 12,
								callbacks: {
									label: function (context) {
										return (
											context.dataset.label +
											': ' +
											context.parsed.y.toFixed(2) +
											'%'
										);
									},
								},
							},
						},
						scales: {
							y: {
								beginAtZero: true,
								title: {
									display: true,
									text: 'درصد تغییرات نرمال‌شده',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									color: '#1a202c',
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
									},
									callback: function (value) {
										return value + '%';
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
							x: {
								title: {
									display: true,
									text: 'شاخص‌های مالی',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									color: '#1a202c',
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
						},
					},
				});

				// Chart 11: Bar Chart 4 - Normalized Comparison (Period 2 × 22 months)
				const ctxPeriodic11 = document
					.getElementById('periodicChart11')
					.getContext('2d');
				new Chart(ctxPeriodic11, {
					type: 'bar',
					data: {
						labels: [
							'شاخص بورس',
							'ارزش ریالی بورس',
							'ارزش دلاری بورس',
							'سکه امامی جدید',
							'دلار',
							'شاخص تورم',
							'مسکن',
						],
						datasets: [
							{
								label: 'دوره اول (اسفند ۹۸ - دیماه ۱۴۰۰) × ۲۲ ماه',
								data: [
									monthlyPercentages.stockIndex.period1 * 22,
									monthlyPercentages.marketValueRial.period1 * 22,
									monthlyPercentages.marketValueUSD.period1 * 22,
									monthlyPercentages.goldPrice.period1 * 22,
									monthlyPercentages.dollarRate.period1 * 22,
									monthlyPercentages.inflation.period1 * 22,
									monthlyPercentages.housingPrice.period1 * 22,
								],
								backgroundColor: [
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
									'rgba(34, 197, 94, 0.8)',
								],
								borderColor: [
									'#22c55e',
									'#22c55e',
									'#22c55e',
									'#22c55e',
									'#22c55e',
									'#22c55e',
									'#22c55e',
								],
								borderWidth: 2,
							},
							{
								label: 'دوره دوم (فروردین ۱۴۰۲ - تیر ۱۴۰۴) × ۲۲ ماه',
								data: [
									monthlyPercentages.stockIndex.period2 * 22,
									monthlyPercentages.marketValueRial.period2 * 22,
									monthlyPercentages.marketValueUSD.period2 * 22,
									monthlyPercentages.goldPrice.period2 * 22,
									monthlyPercentages.dollarRate.period2 * 22,
									monthlyPercentages.inflation.period2 * 22,
									monthlyPercentages.housingPrice.period2 * 22,
								],
								backgroundColor: [
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
									'rgba(239, 68, 68, 0.8)',
								],
								borderColor: [
									'#ef4444',
									'#ef4444',
									'#ef4444',
									'#ef4444',
									'#ef4444',
									'#ef4444',
									'#ef4444',
								],
								borderWidth: 2,
								borderDash: [5, 5],
							},
						],
					},
					options: {
						responsive: true,
						maintainAspectRatio: false,
						plugins: {
							title: {
								display: true,
								text: 'نمودار میله‌ای شماره ۴: مقایسه نرمال‌شده دوره‌ها (۲۲ ماه)',
								font: {
									size: 16,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
							},
							legend: {
								position: 'top',
								labels: {
									color: '#1a202c',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									padding: 15,
									usePointStyle: true,
									pointStyle: 'rect',
								},
							},
							tooltip: {
								backgroundColor: 'rgba(26, 32, 44, 0.95)',
								titleColor: '#ffffff',
								bodyColor: '#ffffff',
								borderColor: '#e2e8f0',
								borderWidth: 1,
								cornerRadius: 8,
								displayColors: true,
								titleFont: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
								bodyFont: {
									size: 13,
									family: "'IRANSansX', sans-serif",
								},
								padding: 12,
								callbacks: {
									label: function (context) {
										return (
											context.dataset.label +
											': ' +
											context.parsed.y.toFixed(2) +
											'%'
										);
									},
								},
							},
						},
						scales: {
							y: {
								beginAtZero: true,
								title: {
									display: true,
									text: 'درصد تغییرات نرمال‌شده',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									color: '#1a202c',
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
									},
									callback: function (value) {
										return value + '%';
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
							x: {
								title: {
									display: true,
									text: 'شاخص‌های مالی',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									color: '#1a202c',
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
						},
					},
				});

				// Chart 12: Slope Chart - Monthly Average Growth Comparison
				const ctxPeriodic12 = document
					.getElementById('periodicChart12')
					.getContext('2d');
				new Chart(ctxPeriodic12, {
					type: 'line',
					data: {
						labels: ['دوره اول (۱۳۹۸-۱۴۰۰)', 'دوره دوم (۱۴۰۱-۱۴۰۴)'],
						datasets: [
							{
								label: 'شاخص بورس',
								data: [
									monthlyPercentages.stockIndex.period1,
									monthlyPercentages.stockIndex.period2,
								],
								borderColor: '#3182ce',
								backgroundColor: 'rgba(49, 130, 206, 0.1)',
								fill: false,
								tension: 0,
								borderWidth: 3,
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#3182ce',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'ارزش دلاری بورس',
								data: [
									monthlyPercentages.marketValueUSD.period1,
									monthlyPercentages.marketValueUSD.period2,
								],
								borderColor: '#38a169',
								backgroundColor: 'rgba(56, 161, 105, 0.1)',
								fill: false,
								tension: 0,
								borderWidth: 3,
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#38a169',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'سکه امامی جدید',
								data: [
									monthlyPercentages.goldPrice.period1,
									monthlyPercentages.goldPrice.period2,
								],
								borderColor: '#d69e2e',
								backgroundColor: 'rgba(214, 158, 46, 0.1)',
								fill: false,
								tension: 0,
								borderWidth: 3,
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#d69e2e',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'دلار',
								data: [
									monthlyPercentages.dollarRate.period1,
									monthlyPercentages.dollarRate.period2,
								],
								borderColor: '#9f7aea',
								backgroundColor: 'rgba(159, 122, 234, 0.1)',
								fill: false,
								tension: 0,
								borderWidth: 3,
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#9f7aea',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'شاخص تورم',
								data: [
									monthlyPercentages.inflation.period1,
									monthlyPercentages.inflation.period2,
								],
								borderColor: '#f56565',
								backgroundColor: 'rgba(245, 101, 101, 0.1)',
								fill: false,
								tension: 0,
								borderWidth: 3,
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#f56565',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'مسکن',
								data: [
									monthlyPercentages.housingPrice.period1,
									monthlyPercentages.housingPrice.period2,
								],
								borderColor: '#ed8936',
								backgroundColor: 'rgba(237, 137, 54, 0.1)',
								fill: false,
								tension: 0,
								borderWidth: 3,
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#ed8936',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
						],
					},
					options: {
						responsive: true,
						maintainAspectRatio: false,
						plugins: {
							title: {
								display: true,
								text: 'مقایسه متوسط ماهانه رشد (نمودار شیب)',
								font: {
									size: 16,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
							},
							legend: {
								position: 'top',
								labels: {
									color: '#1a202c',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									padding: 15,
									usePointStyle: true,
									pointStyle: 'circle',
								},
							},
							tooltip: {
								backgroundColor: 'rgba(26, 32, 44, 0.95)',
								titleColor: '#ffffff',
								bodyColor: '#ffffff',
								borderColor: '#e2e8f0',
								borderWidth: 1,
								cornerRadius: 8,
								displayColors: true,
								titleFont: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
								bodyFont: {
									size: 13,
									family: "'IRANSansX', sans-serif",
								},
								padding: 12,
								callbacks: {
									label: function (context) {
										return (
											context.dataset.label +
											': ' +
											context.parsed.y.toFixed(2) +
											'%'
										);
									},
								},
							},
						},
						scales: {
							y: {
								beginAtZero: false,
								title: {
									display: true,
									text: 'متوسط ماهانه رشد (%)',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									color: '#1a202c',
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
									},
									callback: function (value) {
										return value + '%';
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
							x: {
								title: {
									display: true,
									text: 'دوره زمانی',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									color: '#1a202c',
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
						},
					},
				});

				// Chart 13: USD Market Value Amount Chart
				const ctxPeriodic13 = document
					.getElementById('periodicChart13')
					.getContext('2d');
				new Chart(ctxPeriodic13, {
					type: 'line',
					data: {
						labels: [
							'شروع دوره اول',
							'پایان دوره اول',
							'شروع دوره دوم',
							'پایان دوره دوم',
						],
						datasets: [
							{
								label: 'دوره اول (افزایش)',
								data: [101, 138, null, null],
								borderColor: '#38a169',
								backgroundColor: 'rgba(56, 161, 105, 0.1)',
								fill: false,
								tension: 0,
								borderWidth: 3,
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#38a169',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'دوره دوم (کاهش)',
								data: [null, null, 159, 98],
								borderColor: '#e53e3e',
								backgroundColor: 'rgba(229, 62, 62, 0.1)',
								fill: false,
								tension: 0,
								borderWidth: 3,
								pointRadius: 6,
								pointHoverRadius: 8,
								pointBackgroundColor: '#e53e3e',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
						],
					},
					options: {
						responsive: true,
						maintainAspectRatio: false,
						plugins: {
							title: {
								display: true,
								text: 'ارزش دلاری بورس - مقایسه مقادیر ابتدا و انتهای دوره‌ها',
								font: {
									size: 16,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
							},
							legend: {
								position: 'top',
								labels: {
									color: '#1a202c',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									padding: 15,
									usePointStyle: true,
									pointStyle: 'circle',
								},
							},
							tooltip: {
								backgroundColor: 'rgba(26, 32, 44, 0.95)',
								titleColor: '#ffffff',
								bodyColor: '#ffffff',
								borderColor: '#e2e8f0',
								borderWidth: 1,
								cornerRadius: 8,
								displayColors: true,
								titleFont: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
								bodyFont: {
									size: 13,
									family: "'IRANSansX', sans-serif",
								},
								padding: 12,
								callbacks: {
									label: function (context) {
										return (
											context.dataset.label +
											': ' +
											context.parsed.y.toLocaleString('fa-IR') +
											' میلیارد دلار'
										);
									},
								},
							},
						},
						scales: {
							y: {
								beginAtZero: false,
								title: {
									display: true,
									text: 'ارزش (میلیارد دلار)',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									color: '#1a202c',
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
									},
									callback: function (value) {
										return value.toLocaleString('fa-IR');
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
							x: {
								title: {
									display: true,
									text: 'زمان',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									color: '#1a202c',
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 10,
										family: "'IRANSansX', sans-serif",
									},
									maxRotation: 45,
									minRotation: 45,
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
						},
					},
				});

				// Chart 14: Real Stock Index Growth (Inflation-Adjusted)
				const ctxPeriodic14 = document
					.getElementById('periodicChart14')
					.getContext('2d');

				// Complete market value data from فروردین 1398 to تیر 1404
				const marketValueData = [
					6225526,
					6554295,
					7124469,
					7654252,
					8106571,
					9487808,
					9315275,
					9290602,
					10866181,
					12367527,
					14583494,
					15623595,
					21596889,
					30057957,
					39624433,
					57912068,
					52614714,
					48165581,
					43022143,
					41626423,
					43754378,
					36065501,
					37550121,
					39832929,
					36768204,
					34365332,
					36154671,
					39944070,
					46175856,
					42233550,
					42882122,
					42863081,
					41397226,
					38973689,
					38816963,
					41648206,
					46064142,
					48194139,
					46709154,
					44884651,
					43604640,
					41282384,
					39502132,
					42878958,
					45576204,
					50491922,
					48563302,
					59718058,
					70796076,
					70624695,
					66219594,
					null,
					null,
					null,
					61903799,
					61616690,
					67375993,
					66007414,
					63078484,
					66865340,
					67075358,
					64351309,
					62262277,
					66167770,
					62056008,
					63877460,
					61144372,
					68769824,
					76207371,
					86812850,
					82834562,
					82542906,
					93757528,
					94677309,
					90914927,
					86628981,
				];

				// Complete inflation data from فروردین 1398 to تیر 1404
				const inflationData = [
					182.7, 188.2, 192.6, 196.9, 198.5, 200.1, 201.4, 204.1, 212.5, 214.7,
					219.6, 226.5, 229.9, 240.2, 249.8, 261.8, 270.8, 281.3, 302.8, 326.1,
					338.9, 347.5, 363, 374.2, 378.3, 382, 399.3, 410, 421.7, 435.6, 448.9,
					459.7, 468.2, 474.2, 482, 484.6, 495.1, 520.4, 575.4, 600.4, 614.8,
					631, 649.5, 663.5, 679.8, 713.4, 745.1, 794.3, 834.9, 858.3, 885.8,
					908.8, 940.6, 971.6, 995.9, 1014.8, 1048.3, 1066.1, 1076.8, 1097.3,
					1125.8, 1159.6, 1206, 1242.2, 1277, 1306.4, 1339.1, 1379.3, 1402.7,
					1433.6, 1485.2, 1531.2, 1589.5, 1625.7, 1689.2,
				];

				// Month labels for the entire period from فروردین 1398 to تیر 1404
				const monthLabels = [
					'فروردین 1398',
					'اردیبهشت 1398',
					'خرداد 1398',
					'تیر 1398',
					'مرداد 1398',
					'شهریور 1398',
					'مهر 1398',
					'آبان 1398',
					'آذر 1398',
					'دی 1398',
					'بهمن 1398',
					'اسفند 1398',
					'فروردین 1399',
					'اردیبهشت 1399',
					'خرداد 1399',
					'تیر 1399',
					'مرداد 1399',
					'شهریور 1399',
					'مهر 1399',
					'آبان 1399',
					'آذر 1399',
					'دی 1399',
					'بهمن 1399',
					'اسفند 1399',
					'فروردین 1400',
					'اردیبهشت 1400',
					'خرداد 1400',
					'تیر 1400',
					'مرداد 1400',
					'شهریور 1400',
					'مهر 1400',
					'آبان 1400',
					'آذر 1400',
					'دی 1400',
					'بهمن 1400',
					'اسفند 1400',
					'فروردین 1401',
					'اردیبهشت 1401',
					'خرداد 1401',
					'تیر 1401',
					'مرداد 1401',
					'شهریور 1401',
					'مهر 1401',
					'آبان 1401',
					'آذر 1401',
					'دی 1401',
					'بهمن 1401',
					'اسفند 1401',
					'فروردین 1402',
					'اردیبهشت 1402',
					'خرداد 1402',
					'تیر 1402',
					'مرداد 1402',
					'شهریور 1402',
					'مهر 1402',
					'آبان 1402',
					'آذر 1402',
					'دی 1402',
					'بهمن 1402',
					'اسفند 1402',
					'فروردین 1403',
					'اردیبهشت 1403',
					'خرداد 1403',
					'تیر 1403',
					'مرداد 1403',
					'شهریور 1403',
					'مهر 1403',
					'آبان 1403',
					'آذر 1403',
					'دی 1403',
					'بهمن 1403',
					'اسفند 1403',
					'فروردین 1404',
					'اردیبهشت 1404',
					'خرداد 1404',
					'تیر 1404',
				];

				// Calculate inflation-adjusted true values from the user's data
				const nominalMarketValues = [
					6225526, 6554295, 7124469, 7654252, 8106571, 9487808, 9315275,
					9290602, 10866181, 12367527, 14583494, 15623595, 21596889, 30057957,
					39624433, 57912068, 52614714, 48165581, 43022143, 41626423, 43754378,
					36065501, 37550121, 39832929, 36768204, 34365332, 36154671, 39944070,
					46175856, 42233550, 42882122, 42863081, 41397226, 38973689, 38816963,
					41648206, 46064142, 48194139, 46709154, 44884651, 43604640, 41282384,
					39502132, 42878958, 45576204, 50491922, 48563302, 59718058, 70796076,
					70624695, 66219594, 66219594, 66219594, 66219594, 61903799, 61616690,
					67375993, 66007414, 63078484, 66865340, 67075358, 64351309, 62262277,
					66167770, 62056008, 63877460, 61144372, 68769824, 76207371, 86812850,
					82834562, 82542906, 93757528, 94677309, 90914927, 86628981,
				];

				const inflationAdjustedValues = [
					6225526, 6366881.793, 6771898.492, 7124274.137, 7487383.208,
					8702768.276, 8487971.269, 8351698.441, 9424325.248, 10628885.1,
					12290750.59, 12781147.36, 17475843.74, 23539445.09, 30090495.67,
					42532487.62, 37179784.46, 32594229.64, 26622398.21, 23710163.97,
					23991568.79, 19166758.93, 19100829.69, 19672701.48, 17943545.95,
					16595402.52, 16707922.41, 18011372.23, 20307393.69, 17904262.67,
					17632551.11, 17200503.5, 16294228.5, 15131496.8, 14821753.78,
					15822875.83, 17157726.65, 17074323.25, 14743669.65, 13527184.71,
					12816983.17, 11796660.09, 10942082.77, 11641605.85, 12087910.43,
					12794216.9, 11737008.95, 13657932.04, 15493437.1, 15021691.72,
					13603441.82, 13250225.34, 12786584.09, 12365167.86, 11250024.1,
					10984345.83, 11648442.06, 11214043.3, 10603894.78, 11038613.6,
					10786580.72, 10024672.05, 9298116.63, 9602256.989, 8736553.268,
					8791847.207, 8195610.143, 8971669.546, 9789761.903, 10936506.3,
					10041688.68, 9695318.65, 10643418.43, 10505434.52, 9677615.718,
					9044933.24,
				];

				// Month labels for the chart (all months)
				const chartLabels = monthLabels;

				new Chart(ctxPeriodic14, {
					type: 'line',
					data: {
						labels: chartLabels,
						datasets: [
							{
								label: 'ارزش اسمی بازار',
								data: nominalMarketValues,
								borderColor: '#3182ce',
								backgroundColor: 'rgba(49, 130, 206, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 3,
								pointRadius: 0,
								pointHoverRadius: 6,
								pointBackgroundColor: '#3182ce',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
							{
								label: 'ارزش واقعی (کسر تورم)',
								data: inflationAdjustedValues,
								borderColor: '#e53e3e',
								backgroundColor: 'rgba(229, 62, 62, 0.1)',
								fill: false,
								tension: 0.4,
								borderWidth: 2,
								pointRadius: 0,
								pointHoverRadius: 6,
								pointBackgroundColor: '#e53e3e',
								pointBorderColor: '#ffffff',
								pointBorderWidth: 2,
							},
						],
					},
					options: {
						responsive: true,
						maintainAspectRatio: false,
						plugins: {
							title: {
								display: true,
								text: 'ارزش اسمی بازار در مقابل ارزش واقعی (کسر تورم)',
								font: {
									size: 16,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
							},
							legend: {
								position: 'top',
								labels: {
									color: '#1a202c',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
									padding: 15,
									usePointStyle: true,
									pointStyle: 'circle',
								},
							},
							tooltip: {
								backgroundColor: 'rgba(26, 32, 44, 0.95)',
								titleColor: '#ffffff',
								bodyColor: '#ffffff',
								borderColor: '#e2e8f0',
								borderWidth: 1,
								cornerRadius: 8,
								displayColors: true,
								titleFont: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
								bodyFont: {
									size: 13,
									family: "'IRANSansX', sans-serif",
								},
								padding: 12,
								callbacks: {
									label: function (context) {
										return (
											context.dataset.label +
											': ' +
											context.parsed.y.toFixed(2) +
											'%'
										);
									},
								},
							},
						},
						scales: {
							y: {
								beginAtZero: true,
								title: {
									display: true,
									text: 'ارزش (ریال)',
									color: '#1a202c',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 12,
										family: "'IRANSansX', sans-serif",
									},
									callback: function (value) {
										return (value / 1000000).toFixed(0) + 'M';
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
							x: {
								title: {
									display: true,
									text: 'ماه/سال',
									color: '#1a202c',
									font: {
										size: 14,
										family: "'IRANSansX', sans-serif",
										weight: '600',
									},
								},
								ticks: {
									color: '#4a5568',
									font: {
										size: 10,
										family: "'IRANSansX', sans-serif",
									},
									maxRotation: 45,
									minRotation: 45,
									maxTicksLimit: 30,
									callback: function (value, index) {
										// Show every 3rd label to avoid overcrowding
										if (index % 3 === 0 || index === chartLabels.length - 1) {
											return chartLabels[index];
										}
										return '';
									},
								},
								grid: {
									color: '#e2e8f0',
									drawBorder: false,
								},
							},
						},
					},
				});
			}

			// Helper function to get chart options
			function getChartOptions(title) {
				return {
					responsive: true,
					maintainAspectRatio: false,
					plugins: {
						title: {
							display: true,
							text: `مقایسه درصد تغییرات ${title} در دو دوره زمانی`,
							font: {
								size: 16,
								family: "'IRANSansX', sans-serif",
								weight: '600',
							},
						},
						legend: {
							position: 'top',
							labels: {
								color: '#1a202c',
								font: {
									size: 11,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
								padding: 15,
								usePointStyle: false,
								generateLabels: function (chart) {
									const datasets = chart.data.datasets;
									return datasets.map((dataset, index) => ({
										text: dataset.label,
										fillStyle: 'transparent',
										strokeStyle: dataset.borderColor,
										lineWidth: 3,
										lineDash: dataset.borderDash || [],
										pointStyle: 'line',
										hidden: false,
										index: index,
									}));
								},
							},
						},
						tooltip: {
							backgroundColor: 'rgba(26, 32, 44, 0.95)',
							titleColor: '#ffffff',
							bodyColor: '#ffffff',
							borderColor: '#e2e8f0',
							borderWidth: 1,
							cornerRadius: 8,
							displayColors: true,
							titleFont: {
								size: 14,
								family: "'IRANSansX', sans-serif",
								weight: '600',
							},
							bodyFont: {
								size: 13,
								family: "'IRANSansX', sans-serif",
							},
							padding: 12,
							callbacks: {
								label: function (context) {
									const datasetIndex = context.datasetIndex;
									const periodText =
										datasetIndex === 0 ? 'دوره اول' : 'دوره دوم';
									return (
										context.dataset.label +
										' (' +
										periodText +
										')' +
										': ' +
										context.parsed.y.toFixed(2) +
										'%'
									);
								},
							},
						},
					},
					scales: {
						y: {
							beginAtZero: true,
							title: {
								display: true,
								text: 'درصد تغییر',
								font: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
								color: '#1a202c',
							},
							ticks: {
								color: '#4a5568',
								font: {
									size: 12,
									family: "'IRANSansX', sans-serif",
								},
								callback: function (value) {
									return value + '%';
								},
							},
							grid: {
								color: '#e2e8f0',
								drawBorder: false,
							},
						},
						x: {
							title: {
								display: true,
								text: 'زمان',
								font: {
									size: 14,
									family: "'IRANSansX', sans-serif",
									weight: '600',
								},
								color: '#1a202c',
							},
							ticks: {
								color: '#4a5568',
								font: {
									size: 12,
									family: "'IRANSansX', sans-serif",
								},
							},
							grid: {
								color: '#e2e8f0',
								drawBorder: false,
							},
						},
					},
				};
			}

			// Call the initialization function
			initializePeriodicCharts();

			// Initialize table data
			populateSubTable('ev-revenue', 'original');

			// Initialize subcategory buttons for the default category
			updateSubcategoryButtons('ev-revenue');

			// Ensure the first table is visible on page load
			document
				.getElementById('ev-revenue-original-table')
				.classList.add('active');

			// Table functions
			function showCategory(category) {
				// Hide all categories
				document.querySelectorAll('.category-content').forEach((content) => {
					content.classList.remove('active');
				});

				// Remove active class from all category buttons
				document.querySelectorAll('.category-btn').forEach((btn) => {
					btn.classList.remove('active');
				});

				// Show selected category
				document.getElementById(category + '-category').classList.add('active');

				// Add active class to clicked button
				event.target.classList.add('active');

				// Update subcategory button onclick handlers
				updateSubcategoryButtons(category);

				// Reset subcategory to first option (جداول اصلی گزارش) and update subcategory buttons
				showSubTable(category, 'original');

				// Ensure the first subcategory button (جداول اصلی گزارش) is active
				const subcategoryButtons =
					document.querySelectorAll('.subcategory-btn');
				subcategoryButtons.forEach((btn, index) => {
					if (index === 0) {
						btn.classList.add('active');
					} else {
						btn.classList.remove('active');
					}
				});
			}

			function updateSubcategoryButtons(category) {
				const subcategoryButtons =
					document.querySelectorAll('.subcategory-btn');
				subcategoryButtons[0].onclick = () =>
					showSubTable(category, 'original');
				subcategoryButtons[1].onclick = () =>
					showSubTable(category, 'corrected');
				subcategoryButtons[2].onclick = () => showSubTable(category, '2022');
				subcategoryButtons[3].onclick = () => showSubTable(category, 'custom');
			}

			function showSubTable(category, subType) {
				// First, hide all sub-tables across ALL categories
				document.querySelectorAll('.sub-table').forEach((table) => {
					table.classList.remove('active');
				});

				// Remove active class from ALL subcategory buttons across ALL categories
				document.querySelectorAll('.subcategory-btn').forEach((btn) => {
					btn.classList.remove('active');
				});

				// Show selected sub-table
				document
					.getElementById(category + '-' + subType + '-table')
					.classList.add('active');

				// Add active class to clicked button
				event.target.classList.add('active');

				// Populate table data
				populateSubTable(category, subType);
			}

			function populateSubTable(category, subType) {
				// Sample data - replace with actual data
				const sampleData = {
					'ev-revenue': {
						corrected: [
							{
								description:
									'درآمد عملیاتی سال ۱۴۰۳ - ارائه شده توسط شرکت طبق صورتهای مالی حسابرسی نشده',
								amount: 31579776,
								unit: 'میلیون ریال',
							},
							{
								description: 'افزایش ۵۰ درصدی طبق روند سنوات گذشته',
								amount: 15789888,
								unit: 'میلیون ریال',
							},
							{
								description: 'درآمد عملیاتی پیش بینی سال ۱۴۰۴',
								amount: 47369664,
								unit: 'میلیون ریال',
							},
							{
								description: 'متوسط نسبت EV/Revenue شرکتهای مشابه بین المللی',
								amount: 4.6,
								unit: '',
							},
							{
								description:
									'جمع كل ارزش شرکت فناوری ایده پرداز صبا (بدون محاسبه ارزش برند و سایر امتیازات)',
								amount: 217900454,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش تلویحى فيليمو - ۸۰ درصد ارزش شرکت فناوری ایده پرداز صبا',
								amount: 174320364,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش سهام پلتفرم فیلیمو خارج از بورس - تعدیل با تخفیف ۱۸ درصد عدم نقدشوندگی (DLOM) نسبت به بازار بورس ایران',
								amount: 142942698,
								unit: 'میلیون ریال',
							},
							{
								description: 'تفاوت ارزش پلتفرم فیلیمو در صورت ورود به بورس',
								amount: 31377665,
								unit: 'میلیون ریال',
							},
							{
								description:
									'خسارت وارد شده به سهامدار ۱۲ درصدی - آقای مهدی رضوی',
								amount: 3765320,
								unit: 'میلیون ریال',
							},
						],
						original: [
							{
								description: 'درآمد عملیاتی پیش بینی سال ۱۴۰۴',
								amount: 47369664,
								unit: 'میلیون ریال',
							},
							{
								description: 'متوسط نسبت EV/Revenue شرکتهای مشابه بین المللی',
								amount: 5,
								unit: '',
							},
							{
								description: 'جمع كل ارزش شرکت فناوری ایده پرداز صبا',
								amount: 236848320,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش تلویحی فیلیمو - ۸۰ درصد ارزش شرکت فناوری ایده پرداز صبا',
								amount: 189478656,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش سهام پلتفرم فیلیمو خارج از بورس - تعدیل با تخفیف ۱۸ درصد عدم نقدشوندگی (DLOM) نسبت به بازار بورس ایران',
								amount: 155372498,
								unit: 'میلیون ریال',
							},
							{
								description: 'تفاوت ارزش پلتفرم فیلیمو در صورت ورود به بورس',
								amount: 34106158,
								unit: 'میلیون ریال',
							},
							{
								description:
									'خسارت وارد شده به سهامدار ۱۲ درصدی - آقای مهدی رضوی',
								amount: 4092739,
								unit: 'میلیون ریال',
							},
						],
						2022: [
							{
								description: 'درآمد عملیاتی سال ۱۴۰۰',
								amount: 7305556,
								unit: 'میلیون ریال',
							},
							{
								description:
									'متوسط نسبت EV/Revenue شرکتهای مشابه بين المللي (2022)',
								amount: 3,
								unit: '',
							},
							{
								description: 'جمع كل ارزش شرکت فناوری ایده پرداز صبا',
								amount: 21916668,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش تلویحی فیلیمو - ۸۰ درصد ارزش شرکت فناوری ایده پرداز صبا',
								amount: 17533334,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش سهام پلتفرم فیلیمو خارج از بورس - تعدیل با تخفیف ۱۸ درصد عدم نقد شوندگی (DLOM) نسبت به بازار بورس ایران',
								amount: 14377334,
								unit: 'میلیون ریال',
							},
							{
								description: 'تفاوت ارزش پلتفرم فیلیمو در صورت ورود به بورس',
								amount: 3156000,
								unit: 'میلیون ریال',
							},
							{
								description:
									'خسارت وارد شده به سهامدار ۱۲ درصدی - آقای مهدی رضوی',
								amount: 378720,
								unit: 'میلیون ریال',
							},
						],
						custom: [
							{
								description:
									'درآمد عملیاتی سال ۱۴۰۳ - ارائه شده توسط شرکت طبق صورتهای مالی حسابرسی نشده',
								amount: 31579776,
								unit: 'میلیون ریال',
							},
							{
								description: 'افزایش ۵۰ درصدی طبق روند سنوات گذشته',
								amount: 15789888,
								unit: 'میلیون ریال',
							},
							{
								description: 'درآمد عملیاتی پیش بینی سال ۱۴۰۴',
								amount: 47369664,
								unit: 'میلیون ریال',
							},
							{
								description: 'متوسط نسبت EV/Revenue شرکتهای مشابه بین المللی',
								amount: 1.88,
								unit: '',
							},
							{
								description:
									'جمع كل ارزش شرکت فناوری ایده پرداز صبا بدون محاسبه ارزش برند و سایر امتیازات',
								amount: 89054732,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش تلویحی فیلیمو - ۸۰ درصد ارزش شرکت فناوری ایده پرداز صبا',
								amount: 71243975,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش سهام پلتفرم فیلیمو خارج از بورس - تعدیل با تخفیف ۱۸ درصد عدم نقدشوندگی (DLOM) نسبت به بازار بورس ایران',
								amount: 58420059,
								unit: 'میلیون ریال',
							},
							{
								description: 'تفاوت ارزش پلتفرم فیلیمو در صورت ورود به بورس',
								amount: 12823915,
								unit: 'میلیون ریال',
							},
							{
								description:
									'خسارت وارد شده به سهامدار ۱۲ درصدی - آقای مهدی رضوی',
								amount: 1538870,
								unit: 'میلیون ریال',
							},
						],
					},
					pe: {
						corrected: [
							{
								description:
									'متوسط سود خالص پس از کسر مالیات در سنوات ۱۴۰۳ و ۱۴۰۴',
								amount: 8780351,
								unit: 'میلیون ریال',
							},
							{
								description:
									'متوسط P/E شرکتهای مشابه بین المللی با تعدیل نرخ بهره',
								amount: 25,
								unit: '',
							},
							{
								description:
									'جمع كل ارزش شرکت فناوران ایده پرداز صبا (بدون محاسبه ارزش برند و سایر امتیازات)',
								amount: 219508775,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش پلتفرم فیلیمو - ۸۰ درصد ارزش شرکت فناوران ایده پرداز صبا',
								amount: 175607020,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش سهام فیلیمو خارج از بورس - تعدیل با تخفیف ۱۸ درصد نقدشوندگی',
								amount: 143997756,
								unit: 'میلیون ریال',
							},
							{
								description: 'تفاوت ارزش پلتفرم فیلیمو در صورت ورود به بورس',
								amount: 31609264,
								unit: 'میلیون ریال',
							},
							{
								description: 'خسارت وارد به سهامدار ۱۲ درصدی - آقای مهداد رضوی',
								amount: 3793112,
								unit: 'میلیون ریال',
							},
						],
						original: [
							{
								description:
									'متوسط سود خالص پس از کسر مالیات در سنوات ۱۴۰۳ و ۱۴۰۴',
								amount: 8780351,
								unit: 'میلیون ریال',
							},
							{
								description:
									'متوسط P/E شرکتهای مشابه بین المللی با تعدیل نرخ بهره',
								amount: 30,
								unit: '',
							},
							{
								description:
									'جمع كل ارزش شرکت فناوران ایده پرداز صبا (بدون محاسبه ارزش برند و سایر امتیازات)',
								amount: 263410530,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش پلتفرم فیلیمو - ۸۰ درصد ارزش شرکت فناوران ایده پرداز صبا',
								amount: 210728424,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش سهام فیلیمو خارج از بورس - تعدیل با تخفیف ۱۸ درصد نقدشوندگی',
								amount: 172797308,
								unit: 'میلیون ریال',
							},
							{
								description: 'تفاوت ارزش پلتفرم فیلیمو در صورت ورود به بورس',
								amount: 37931116,
								unit: 'میلیون ریال',
							},
							{
								description: 'خسارت وارد به سهامدار ۱۲ درصدی - آقای مهداد رضوی',
								amount: 4551734,
								unit: 'میلیون ریال',
							},
						],
						2022: [
							{
								description: 'سود خالص پس از کسر مالیات در سال ۱۴۰۰',
								amount: 1434749,
								unit: 'میلیون ریال',
							},
							{
								description: 'متوسط P/E شرکتهای مشابه بین المللی (2022)',
								amount: 27.5,
								unit: '',
							},
							{
								description: 'جمع كل ارزش شرکت فناوران ایده پرداز صبا',
								amount: 39455598,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش پلتفرم فیلیمو - ۸۰ درصد ارزش شرکت فناوران ایده پرداز صبا',
								amount: 31564478,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش سهام فیلیمو خارج از بورس - تعدیل با تخفیف ۱۸ درصد نقدشوندگی',
								amount: 25882872,
								unit: 'میلیون ریال',
							},
							{
								description: 'تفاوت ارزش پلتفرم فیلیمو در صورت ورود به بورس',
								amount: 5681606,
								unit: 'میلیون ریال',
							},
							{
								description: 'خسارت وارد به سهامدار ۱۲ درصدی - آقای مهداد رضوی',
								amount: 681793,
								unit: 'میلیون ریال',
							},
						],
						custom: [
							{
								description:
									'متوسط سود خالص پس از کسر مالیات در سنوات ۱۴۰۳ و ۱۴۰۴',
								amount: 8780351,
								unit: 'میلیون ریال',
							},
							{
								description:
									'متوسط P/E شرکتهای مشابه بین المللی با تعدیل نرخ بهره',
								amount: 10.76,
								unit: '',
							},
							{
								description:
									'جمع كل ارزش شرکت فناوران ایده پرداز صبا بدون محاسبه ارزش برند و سایر امتیازات',
								amount: 94476577,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش پلتفرم فیلیمو - ۸۰ درصد ارزش شرکت فناوران ایده پرداز صبا',
								amount: 75581261,
								unit: 'میلیون ریال',
							},
							{
								description:
									'ارزش سهام فیلیمو خارج از بورس - تعدیل با تخفیف ۱۸ درصد نقدشوندگی',
								amount: 61976634,
								unit: 'میلیون ریال',
							},
							{
								description: 'تفاوت ارزش پلتفرم فیلیمو در صورت ورود به بورس',
								amount: 13604627,
								unit: 'میلیون ریال',
							},
							{
								description: 'خسارت وارد به سهامدار ۱۲ درصدی - آقای مهداد رضوی',
								amount: 1632555,
								unit: 'میلیون ریال',
							},
						],
					},
				};

				const tbody = document.getElementById(
					category + '-' + subType + '-body'
				);
				tbody.innerHTML = '';

				const data = sampleData[category][subType];
				const ratioColumn = category === 'ev-revenue' ? 'EV/Revenue' : 'P/E';

				data.forEach((item, index) => {
					const row = document.createElement('tr');

					// Check if this is a financial data table structure (2022, original, corrected, custom, etc.)
					if (
						subType === '2022' ||
						(category === 'pe' && subType === 'original') ||
						(category === 'pe' && subType === 'corrected') ||
						(category === 'pe' && subType === 'custom') ||
						(category === 'ev-revenue' && subType === 'original') ||
						(category === 'ev-revenue' && subType === 'corrected') ||
						(category === 'ev-revenue' && subType === 'custom')
					) {
						row.innerHTML = `
							<td>${index + 1}</td>
							<td>${item.description}</td>
							<td>${item.amount.toLocaleString('fa-IR')}</td>
						`;
					} else {
						// Standard company/ratio structure with enhanced status styling
						const statusClass = getStatusClass(item.status);
						const changeClass = getChangeClass(item.change);

						row.innerHTML = `
							<td>${item.company}</td>
							<td>${item.ratio}</td>
							<td class="${changeClass}">${item.change}</td>
							<td class="${statusClass}">${item.status}</td>
						`;
					}

					tbody.appendChild(row);
				});
			}

			// Helper functions for status and change styling
			function getStatusClass(status) {
				switch (status) {
					case 'بهبود':
						return 'status-improved';
					case 'کاهش':
						return 'status-decreased';
					case 'ثابت':
						return 'status-stable';
					default:
						return '';
				}
			}

			function getChangeClass(change) {
				if (change.startsWith('+')) {
					return 'change-positive';
				} else if (change.startsWith('-')) {
					return 'change-negative';
				} else {
					return 'change-neutral';
				}
			}

			// Comparison companies data
			const comparisonData = {
				evaluatorCompanies: [
					{
						company: 'iQIYI',
						symbol: 'IQ',
						service: 'Pure SVOD (China)',
						pe: 10.22,
					},
					{
						company: 'CuriosityStream',
						symbol: 'CURI',
						service: 'Pure SVOD',
						pe: 8.33,
					},
					{
						company: 'Gaia',
						symbol: 'GAIA',
						service: 'Diversified (Max)',
						pe: 13.85,
					},
					{
						company: 'Warner Bros Discovery',
						symbol: 'WBD',
						service: 'Diversified (+Paramount)',
						pe: 9.08,
					},
					{
						company: 'Paramount Global',
						symbol: 'PARA',
						service: 'Diversified (+Paramount)',
						pe: 16.5,
					},
					{
						company: 'Kuaishou Technology',
						symbol: '1024.HK',
						service: 'live streaming, online marketing (China)',
						pe: 11.54,
					},
					{
						company: 'Roku',
						symbol: 'ROKU',
						service: 'Streaming',
						pe: 10.45,
					},
					{
						company: 'Cineverse',
						symbol: 'CNVS',
						service: 'streaming channels',
						pe: 9.21,
					},
					{
						company: 'Baidu',
						symbol: 'BIDU',
						service: "China's SE",
						pe: 10.37,
					},
					{
						company: 'Coupang Play',
						symbol: 'CPNG',
						service: 'Korean VOD',
						pe: 13.77,
					},
					{
						company: 'Start',
						symbol: 'NMGR',
						service: 'Russian',
						pe: 7.58,
					},
					{
						company: 'TIM Play',
						symbol: 'TIMB',
						service: 'Brazil',
						pe: 8.26,
					},
				],
				evaluatorEvRevenue: [
					{
						company: 'iQIYI',
						symbol: 'IQ',
						service: 'Pure SVOD (China)',
						evRevenue: 0.79,
					},
					{
						company: 'CuriosityStream',
						symbol: 'CURI',
						service: 'Pure SVOD',
						evRevenue: 4.35,
					},
					{
						company: 'Gaia',
						symbol: 'GAIA',
						service: 'Pure SVOD',
						evRevenue: 1.21,
					},
					{
						company: 'Walt Disney Co.',
						symbol: 'DIS',
						service: 'Diversified (+Disney)',
						evRevenue: 2.73,
					},
					{
						company: 'Warner Bros Discovery',
						symbol: 'WBD',
						service: 'Diversified (Max)',
						evRevenue: 1.69,
					},
					{
						company: 'Paramount Global',
						symbol: 'PARA',
						service: 'Diversified (+Paramount)',
						evRevenue: 0.79,
					},
					{
						company: 'Bilibili Inc.',
						symbol: 'BILI',
						service: 'Pure SVOD (China)',
						evRevenue: 1.8,
					},
					{
						company: 'Kuaishou Technology',
						symbol: '1024.HK',
						service: 'live streaming, online marketing (China)',
						evRevenue: 1.8,
					},
					{
						company: 'Roku',
						symbol: 'ROKU',
						service: 'Streaming',
						evRevenue: 2.9,
					},
					{
						company: 'Cineverse',
						symbol: 'CNVS',
						service: 'streaming channels',
						evRevenue: 1.0,
					},
				],
				ourCompanies: [
					{
						brand: 'Netflix',
						parentCompany: '-',
						independentStatus: 'بله',
						independentPE: 'دارد',
						claimedPE: 45,
						description: '',
					},
					{
						brand: '+Disney',
						parentCompany: 'Walt Disney Co. (DIS)',
						independentStatus: 'ندارد',
						independentPE: 'ندارد',
						claimedPE: 50,
						description: 'P/E متعلق به DIS است',
					},
					{
						brand: 'Amazon Prime Video',
						parentCompany: 'Amazon.com Inc.',
						independentStatus: 'ندارد',
						independentPE: 'ندارد',
						claimedPE: 40,
						description: 'فقط Amazon دارای P/E است',
					},
					{
						brand: 'YouTube',
						parentCompany: 'Alphabet Inc. (GOOG)',
						independentStatus: 'ندارد',
						independentPE: 'ندارد',
						claimedPE: 30,
						description: 'فقط Alphabet دارای P/E است',
					},
					{
						brand: 'TikTok',
						parentCompany: 'ByteDance Ltd.',
						independentStatus: 'خصوصی است',
						independentPE: 'ندارد',
						claimedPE: 40,
						description: 'شرکت غیر بورسی است',
					},
					{
						brand: 'Instagram',
						parentCompany: 'Meta Platforms Inc.',
						independentStatus: 'ندارد',
						independentPE: 'ندارد',
						claimedPE: 35,
						description: 'بخشی از Meta است',
					},
					{
						brand: 'Snapchat',
						parentCompany: 'Snap Inc.',
						independentStatus: 'بله',
						independentPE: 'دارد',
						claimedPE: 30,
						description: '',
					},
				],
				ourEvRevenue: [
					{
						company: 'Netflix',
						forecast2025: 6,
						evRevenue2024: 6.3,
					},
					{
						company: '+Disney',
						forecast2025: 4.5,
						evRevenue2024: 4.8,
					},
					{
						company: 'Amazon Prime Video',
						forecast2025: 5,
						evRevenue2024: 5.2,
					},
					{
						company: 'Tencent Video',
						forecast2025: 3.7,
						evRevenue2024: 3.5,
					},
					{
						company: 'Warner Bros. Discovery (HBO Max)',
						forecast2025: 3,
						evRevenue2024: 2.8,
					},
					{
						company: '+Paramount',
						forecast2025: 2.2,
						evRevenue2024: 2,
					},
					{
						company: '+Apple TV',
						forecast2025: 4.3,
						evRevenue2024: 4,
					},
				],
			};

			// Function to switch comparison sub-tabs
			function switchComparisonSubTab(subTabId) {
				// Hide all comparison sub-tables
				document
					.querySelectorAll('.comparison-sub-table')
					.forEach((subTable) => {
						subTable.classList.remove('active');
					});

				// Remove active class from all sub-tab buttons
				document.querySelectorAll('.sub-tab-button').forEach((button) => {
					button.classList.remove('active');
				});

				// Show selected sub-table
				document.getElementById(subTabId).classList.add('active');

				// Add active class to clicked button
				event.target.classList.add('active');
			}

			// Function to switch periodic comparison sub-tabs
			function switchPeriodicSubTab(subTabId) {
				// Hide all periodic sub-charts
				document.querySelectorAll('.periodic-sub-chart').forEach((subChart) => {
					subChart.classList.remove('active');
				});

				// Remove active class from all periodic sub-tab buttons
				document
					.querySelectorAll('.periodic-sub-tab-button')
					.forEach((button) => {
						button.classList.remove('active');
					});

				// Show selected sub-chart
				document.getElementById(subTabId).classList.add('active');

				// Add active class to clicked button
				event.target.classList.add('active');
			}

			// Function to populate comparison tables
			function populateComparisonTables() {
				// Populate evaluator P/E companies table
				const evaluatorTbody = document.getElementById(
					'evaluator-companies-body'
				);
				evaluatorTbody.innerHTML = '';

				comparisonData.evaluatorCompanies.forEach((company, index) => {
					const row = document.createElement('tr');
					row.innerHTML = `
						<td>${index + 1}</td>
						<td>${company.company}</td>
						<td>${company.symbol}</td>
						<td>${company.service}</td>
						<td>${company.pe}</td>
					`;
					evaluatorTbody.appendChild(row);
				});

				// Calculate average for evaluator P/E companies (excluding null values)
				const evaluatorValidPEs = comparisonData.evaluatorCompanies
					.filter((company) => company.pe !== '--')
					.map((company) => company.pe);
				const evaluatorPEAverage =
					evaluatorValidPEs.length > 0
						? (
								evaluatorValidPEs.reduce((sum, pe) => sum + pe, 0) /
								evaluatorValidPEs.length
						  ).toFixed(2)
						: '--';

				// Calculate median for evaluator P/E companies
				const evaluatorPEMedian =
					evaluatorValidPEs.length > 0
						? evaluatorValidPEs
								.sort((a, b) => a - b)
								[Math.floor(evaluatorValidPEs.length / 2)].toFixed(2)
						: '--';

				// Add average row for evaluator P/E companies
				const evaluatorPEAverageRow = document.createElement('tr');
				evaluatorPEAverageRow.style.fontWeight = 'bold';
				evaluatorPEAverageRow.style.backgroundColor = '#f7fafc';
				evaluatorPEAverageRow.innerHTML = `
					<td><strong>${comparisonData.evaluatorCompanies.length + 1}</strong></td>
					<td><strong>میانگین</strong></td>
					<td><strong>-</strong></td>
					<td><strong>-</strong></td>
					<td><strong>${evaluatorPEAverage}</strong></td>
				`;
				evaluatorTbody.appendChild(evaluatorPEAverageRow);

				// Add median row for evaluator P/E companies
				const evaluatorPEMedianRow = document.createElement('tr');
				evaluatorPEMedianRow.style.fontWeight = 'bold';
				evaluatorPEMedianRow.style.backgroundColor = '#f7fafc';
				evaluatorPEMedianRow.innerHTML = `
					<td><strong>${comparisonData.evaluatorCompanies.length + 2}</strong></td>
					<td><strong>میانه</strong></td>
					<td><strong>-</strong></td>
					<td><strong>-</strong></td>
					<td><strong>${evaluatorPEMedian}</strong></td>
				`;
				evaluatorTbody.appendChild(evaluatorPEMedianRow);

				// Populate evaluator EV/Revenue companies table
				const evaluatorEvRevenueTbody = document.getElementById(
					'evaluator-ev-revenue-body'
				);
				evaluatorEvRevenueTbody.innerHTML = '';

				comparisonData.evaluatorEvRevenue.forEach((company, index) => {
					const row = document.createElement('tr');
					row.innerHTML = `
						<td>${index + 1}</td>
						<td>${company.company}</td>
						<td>${company.symbol}</td>
						<td>${company.service}</td>
						<td>${company.evRevenue}</td>
					`;
					evaluatorEvRevenueTbody.appendChild(row);
				});

				// Calculate average for evaluator EV/Revenue companies
				const evaluatorValidEvRevenue = comparisonData.evaluatorEvRevenue
					.filter((company) => company.evRevenue !== '--')
					.map((company) => company.evRevenue);
				const evaluatorEvRevenueAverage =
					evaluatorValidEvRevenue.length > 0
						? (
								evaluatorValidEvRevenue.reduce((sum, ev) => sum + ev, 0) /
								evaluatorValidEvRevenue.length
						  ).toFixed(2)
						: '--';

				// Calculate median for evaluator EV/Revenue companies
				const evaluatorEvRevenueMedian =
					evaluatorValidEvRevenue.length > 0
						? evaluatorValidEvRevenue
								.sort((a, b) => a - b)
								[Math.floor(evaluatorValidEvRevenue.length / 2)].toFixed(2)
						: '--';

				// Add average row for evaluator EV/Revenue companies
				const evaluatorEvRevenueAverageRow = document.createElement('tr');
				evaluatorEvRevenueAverageRow.style.fontWeight = 'bold';
				evaluatorEvRevenueAverageRow.style.backgroundColor = '#f7fafc';
				evaluatorEvRevenueAverageRow.innerHTML = `
					<td><strong>${comparisonData.evaluatorEvRevenue.length + 1}</strong></td>
					<td><strong>میانگین</strong></td>
					<td><strong>-</strong></td>
					<td><strong>-</strong></td>
					<td><strong>${evaluatorEvRevenueAverage}</strong></td>
				`;
				evaluatorEvRevenueTbody.appendChild(evaluatorEvRevenueAverageRow);

				// Add median row for evaluator EV/Revenue companies
				const evaluatorEvRevenueMedianRow = document.createElement('tr');
				evaluatorEvRevenueMedianRow.style.fontWeight = 'bold';
				evaluatorEvRevenueMedianRow.style.backgroundColor = '#f7fafc';
				evaluatorEvRevenueMedianRow.innerHTML = `
					<td><strong>${comparisonData.evaluatorEvRevenue.length + 2}</strong></td>
					<td><strong>میانه</strong></td>
					<td><strong>-</strong></td>
					<td><strong>-</strong></td>
					<td><strong>${evaluatorEvRevenueMedian}</strong></td>
				`;
				evaluatorEvRevenueTbody.appendChild(evaluatorEvRevenueMedianRow);

				// Populate our P/E companies table
				const ourTbody = document.getElementById('our-companies-body');
				ourTbody.innerHTML = '';

				comparisonData.ourCompanies.forEach((company, index) => {
					const row = document.createElement('tr');
					row.innerHTML = `
						<td>${index + 1}</td>
						<td>${company.brand}</td>
						<td>${company.parentCompany}</td>
						<td>${company.independentStatus}</td>
						<td>${company.independentPE}</td>
						<td style="color: #e53e3e; font-weight: 600;">${company.claimedPE}</td>
						<td>${company.description}</td>
					`;
					ourTbody.appendChild(row);
				});

				// Populate our EV/Revenue companies table
				const ourEvRevenueTbody = document.getElementById(
					'our-ev-revenue-body'
				);
				ourEvRevenueTbody.innerHTML = '';

				comparisonData.ourEvRevenue.forEach((company, index) => {
					const row = document.createElement('tr');
					row.innerHTML = `
						<td>${index + 1}</td>
						<td>${company.company}</td>
						<td style="color: #e53e3e; font-weight: 600;">${company.evRevenue2024}x</td>
						<td>${company.forecast2025}x</td>
					`;
					ourEvRevenueTbody.appendChild(row);
				});

				// Calculate average for our EV/Revenue companies (2024 values)
				const ourValidEvRevenue2024 = comparisonData.ourEvRevenue
					.filter((company) => company.evRevenue2024 !== '--')
					.map((company) => company.evRevenue2024);
				const ourEvRevenue2024Average =
					ourValidEvRevenue2024.length > 0
						? (
								ourValidEvRevenue2024.reduce((sum, ev) => sum + ev, 0) /
								ourValidEvRevenue2024.length
						  ).toFixed(2)
						: '--';

				// Calculate average for our EV/Revenue companies (2025 forecast)
				const ourValidEvRevenue2025 = comparisonData.ourEvRevenue
					.filter((company) => company.forecast2025 !== '--')
					.map((company) => company.forecast2025);
				const ourEvRevenue2025Average =
					ourValidEvRevenue2025.length > 0
						? (
								ourValidEvRevenue2025.reduce((sum, ev) => sum + ev, 0) /
								ourValidEvRevenue2025.length
						  ).toFixed(2)
						: '--';

				// Calculate median for our EV/Revenue companies (2024 values)
				const ourEvRevenue2024Median =
					ourValidEvRevenue2024.length > 0
						? ourValidEvRevenue2024
								.sort((a, b) => a - b)
								[Math.floor(ourValidEvRevenue2024.length / 2)].toFixed(2)
						: '--';

				// Calculate median for our EV/Revenue companies (2025 forecast)
				const ourEvRevenue2025Median =
					ourValidEvRevenue2025.length > 0
						? ourValidEvRevenue2025
								.sort((a, b) => a - b)
								[Math.floor(ourValidEvRevenue2025.length / 2)].toFixed(2)
						: '--';

				// Add average row for our EV/Revenue companies
				const ourEvRevenueAverageRow = document.createElement('tr');
				ourEvRevenueAverageRow.style.fontWeight = 'bold';
				ourEvRevenueAverageRow.style.backgroundColor = '#f7fafc';
				ourEvRevenueAverageRow.innerHTML = `
					<td><strong>${comparisonData.ourEvRevenue.length + 1}</strong></td>
					<td><strong>میانگین</strong></td>
					<td><strong style="color: #e53e3e;">${ourEvRevenue2024Average}x</strong></td>
					<td><strong>${ourEvRevenue2025Average}x</strong></td>
				`;
				ourEvRevenueTbody.appendChild(ourEvRevenueAverageRow);

				// Add median row for our EV/Revenue companies
				const ourEvRevenueMedianRow = document.createElement('tr');
				ourEvRevenueMedianRow.style.fontWeight = 'bold';
				ourEvRevenueMedianRow.style.backgroundColor = '#f7fafc';
				ourEvRevenueMedianRow.innerHTML = `
					<td><strong>${comparisonData.ourEvRevenue.length + 2}</strong></td>
					<td><strong>میانه</strong></td>
					<td><strong style="color: #e53e3e;">${ourEvRevenue2024Median}x</strong></td>
					<td><strong>${ourEvRevenue2025Median}x</strong></td>
				`;
				ourEvRevenueTbody.appendChild(ourEvRevenueMedianRow);
			}
		</script>
	</body>
</html>
